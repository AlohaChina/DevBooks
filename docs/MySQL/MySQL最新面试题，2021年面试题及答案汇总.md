# MySQL最新面试题，2021年面试题及答案汇总

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://github.com/souyunku/DevBooks/blob/master/docs/index.md)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png)



### 1、CHAR和VARCHAR的区别？

1.CHAR和VARCHAR类型在存储和检索方面有所不同

2.CHAR列长度固定为创建表时声明的长度，长度值范围是1到255

当CHAR值被存储时，它们被用空格填充到特定长度，检索CHAR值时需删除尾随空格。


### 2、MYSQL的主从延迟，你怎么解决？

嘻嘻，先复习一下主从复制原理吧

主从复制分了五个步骤进行：

**1、** 步骤一：主库的更新事件(update、insert、delete)被写到binlog

**2、** 步骤二：从库发起连接，连接到主库。

**3、** 步骤三：此时主库创建一个binlog dump thread，把binlog的内容发送到从库。

**4、** 步骤四：从库启动之后，创建一个I/O线程，读取主库传过来的binlog内容并写入到relay log

**5、** 步骤五：还会创建一个SQL线程，从relay log里面读取内容，从Exec_Master_Log_Pos位置开始执行读取到的更新事件，将更新内容写入到slave的db


### 3、什么是数据库事务？

事务是一个不可分割的数据库操作序列，也是数据库并发控制的基本单位，其执行的结果必须使数据库从一种一致性状态变到另一种一致性状态。事务是逻辑上的一组操作，要么都执行，要么都不执行。

**事务最经典也经常被拿出来说例子就是转账了**

假如小明要给小红转账1000元，这个转账会涉及到两个关键操作就是：将小明的余额减少1000元，将小红的余额增加1000元。万一在这两个操作之间突然出现错误比如银行系统崩溃，导致小明余额减少而小红的余额没有增加，这样就不对了。事务就是保证这两个关键操作要么都成功，要么都要失败。


### 4、一条SQL语句在MySQL中如何执行的？

先看一下MySQL的逻辑架构图吧~

**「查询语句：」**

**1、** 先检查该语句是否有权限

**2、** 如果没有权限，直接返回错误信息

**3、** 如果有权限，在 MySQL8.0 版本以前，会先查询缓存。

**4、** 如果没有缓存，分析器进行词法分析，提取 sql 语句select等的关键元素。然后判断sql 语句是否有语法错误，比如关键词是否正确等等。

**5、** 优化器进行确定执行方案

**6、** 进行权限校验，如果没有权限就直接返回错误信息，如果有权限就会调用数据库引擎接口，返回执行结果。


### 5、视图的缺点

**1、** 性能。数据库必须把视图的查询转化成对基本表的查询，如果这个视图是由一个复杂的多表查询所定义，那么，即使是视图的一个简单查询，数据库也把它变成一个复杂的结合体，需要花费一定的时间。

**2、** 修改限制。当用户试图修改视图的某些行时，数据库必须把它转化为对基本表的某些行的修改。事实上，当从视图中插入或者删除时，情况也是这样。对于简单视图来说，这是很方便的，但是，对于比较复杂的视图，可能是不可修改的

**这些视图有如下特征：**

**1、** 有UNIQUE等集合操作符的视图。

**2、** 有GROUP BY子句的视图。

**3、** 有诸如AVG\SUM\MAX等聚合函数的视图。

**4、** 使用DISTINCT关键字的视图。

**5、** 连接表的视图（其中有些例外）


### 6、主键使用自增ID还是UUID，为什么？

如果是单机的话，选择自增ID；如果是分布式系统，优先考虑UUID吧，但还是最好自己公司有一套分布式唯一ID生产方案吧。

**1、** 自增ID：数据存储空间小，查询效率高。但是如果数据量过大,会超出自增长的值范围，多库合并，也有可能有问题。

**2、** uuid：适合大量数据的插入和更新操作，但是它无序的，插入数据效率慢，占用空间大。


### 7、覆盖索引是什么？

**1、** 覆盖索引指的是一个查询语句的执行只用从索引中就能获取到。不必从数据表中读取。也可以被称之为索引覆盖。当一条查询语句符合覆盖索引条件时候，MySQL只需要通过索引就可以返回查询所需要的数据。这样就可以避免回表操作，减少I/O提高效率。

**2、** 表covering_index_sample中有一个普通索引 idx_key1_key2(key1,key2)。当我们通过SQL语句：

**3、** select key2 from covering_index_sample where key1 = 'keytest';的时候，就可以通过覆盖索引查询，无需回表。


### 8、百万级别或以上的数据，你是如何删除的？

**1、** 我们想要删除百万数据的时候可以先删除索引

**2、** 然后批量删除其中无用数据

**3、** 删除完成后重新创建索引。


### 9、MyISAM表格将在哪里存储，并且还提供其存储格式？

**每个MyISAM表格以三种格式存储在磁盘上：**

**1、** ·“.frm”文件存储表定义

**2、** ·数据文件具有“.MYD”（MYData）扩展名

**3、** 索引文件具有“.MYI”（MYIndex）扩展名


### 10、索引的数据结构（b树，hash）

索引的数据结构和具体存储引擎的实现有关，在MySQL中使用较多的索引有**Hash索引**，**B+树索引**等，而我们经常使用的InnoDB存储引擎的默认索引实现为：B+树索引。对于哈希索引来说，底层的数据结构就是哈希表，因此在绝大多数需求为单条记录查询的时候，可以选择哈希索引，查询性能最快；其余大部分场景，建议选择BTree索引。

**B树索引**

MySQL通过存储引擎取数据，基本上90%的人用的就是InnoDB了，按照实现方式分，InnoDB的索引类型目前只有两种：BTREE（B树）索引和HASH索引。B树索引是MySQL数据库中使用最频繁的索引类型，基本所有存储引擎都支持BTree索引。通常我们说的索引不出意外指的就是（B树）索引（实际是用B+树实现的，因为在查看表索引时，MySQL一律打印BTREE，所以简称为B树索引）

![99_1.png][99_1.png]

**查询方式：**

**1、** 主键索引区:PI(关联保存的时数据的地址)按主键查询,

**2、** 普通索引区:si(关联的id的地址,然后再到达上面的地址)。所以按主键查询,速度最快

**B+tree性质：**

**1、** n棵子tree的节点包含n个关键字，不用来保存数据而是保存数据的索引。

**2、** 所有的叶子结点中包含了全部关键字的信息，及指向含这些关键字记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。

**3、** 所有的非终端结点可以看成是索引部分，结点中仅含其子树中的最大（或最小）关键字。

**4、** B+ 树中，数据对象的插入和删除仅在叶节点上进行。

**5、** B+树有2个头指针，一个是树的根节点，一个是最小关键码的叶节点。

**哈希索引**

简要说下，类似于数据结构中简单实现的HASH表（散列表）一样，当我们在MySQL中用哈希索引时，主要就是通过Hash算法（常见的Hash算法有直接定址法、平方取中法、折叠法、除数取余法、随机数法），将数据库字段数据转换成定长的Hash值，与这条数据的行指针一并存入Hash表的对应位置；如果发生Hash碰撞（两个不同关键字的Hash值相同），则在对应Hash键下以链表形式存储。当然这只是简略模拟图。

![99_2.png][99_2.png]


### 11、从锁的类别角度讲，MySQL都有哪些锁呢？
### 12、MySQL中InnoDB引擎的行锁是怎么实现的？
### 13、优化子查询
### 14、MySQL数据库作发布系统的存储，一天五万条以上的增量，预计运维三年,怎么优化？
### 15、B+树在满足聚簇索引和覆盖索引的时候不需要回表查询数据？
### 16、说说对SQL语句优化有哪些方法？（选择几条）
### 17、什么是MySQL?
### 18、创建索引的原则？
### 19、MySQL数据库cpu飙升的话，要怎么处理呢？
### 20、锁的优化策略
### 21、优化数据库的方法
### 22、什么是数据库连接池?为什么需要数据库连接池呢?
### 23、MySQL中都有哪些触发器？
### 24、Hash索引和B+树所有有什么区别或者说优劣呢?
### 25、如何优化查询过程中的数据访问
### 26、为什么要使用视图？什么是视图？
### 27、解释MySQL外连接、内连接与自连接的区别
### 28、varchar(50)中50的涵义
### 29、drop、delete与truncate的区别
### 30、存储引擎选择




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)


## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
