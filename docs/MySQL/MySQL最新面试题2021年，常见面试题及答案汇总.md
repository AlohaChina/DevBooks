# MySQL最新面试题2021年，常见面试题及答案汇总

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://github.com/souyunku/DevBooks/blob/master/docs/index.md)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png)



### 1、如果一个表有一列定义为TIMESTAMP，将发生什么？

每当行被更改时，时间戳字段将获取当前时间戳。


### 2、SQL 约束有哪几种呢？

**1、** NOT NULL: 约束字段的内容一定不能为NULL。

**2、** UNIQUE: 约束字段唯一性，一个表允许有多个 Unique 约束。

**3、** PRIMARY KEY: 约束字段唯一，不可重复，一个表只允许存在一个。

**4、** FOREIGN KEY: 用于预防破坏表之间连接的动作，也能防止非法数据插入外键。

**5、** CHECK: 用于控制字段的值范围。


### 3、一条Sql的执行顺序？

![](https://user-gold-cdn.xitu.io/2020/5/24/17243f19b75d3514?w=790&h=877&f=png&s=85634#alt=)


### 4、数据库索引的原理，为什么要用 B+树，为什么不用二叉树？

可以从几个维度去看这个问题，查询是否够快，效率是否稳定，存储数据多少，以及查找磁盘次数，为什么不是二叉树，为什么不是平衡二叉树，为什么不是B树，而偏偏是B+树呢？

**为什么不是一般二叉树？**

如果二叉树特殊化为一个链表，相当于全表扫描。平衡二叉树相比于二叉查找树来说，查找效率更稳定，总体的查找速度也更快。

**为什么不是平衡二叉树呢？**

我们知道，在内存比在磁盘的数据，查询效率快得多。如果树这种数据结构作为索引，那我们每查找一次数据就需要从磁盘中读取一个节点，也就是我们说的一个磁盘块，但是平衡二叉树可是每个节点只存储一个键值和数据的，如果是B树，可以存储更多的节点数据，树的高度也会降低，因此读取磁盘的次数就降下来啦，查询效率就快啦。

**那为什么不是B树而是B+树呢？**

1）B+树非叶子节点上是不存储数据的，仅存储键值，而B树节点中不仅存储键值，也会存储数据。innodb中页的默认大小是16KB，如果不存储数据，那么就会存储更多的键值，相应的树的阶数（节点的子节点树）就会更大，树就会更矮更胖，如此一来我们查找数据进行磁盘的IO次数有会再次减少，数据查询的效率也会更快。

2）B+树索引的所有数据均存储在叶子节点，而且数据是按照顺序排列的，链表连着的。那么B+树使得范围查找，排序查找，分组查找以及去重查找变得异常简单。


### 5、使用悲观锁

悲观锁思想就是，当前线程要进来修改数据时，别的线程都得拒之门外~ 比如，可以使用select…for update ~

```
select * from User where name=‘jay’ for update
```

以上这条sql语句会锁定了User表中所有符合检索条件（name=‘jay’）的记录。本次事务提交之前，别的线程都无法修改这些记录。


### 6、InnoDB存储引擎的锁的算法有三种

**1、** Record lock：单个行记录上的锁

**2、** Gap lock：间隙锁，锁定一个范围，不包括记录本身

**3、** Next-key lock：record+gap 锁定一个范围，包含记录本身

**相关知识点：**

**1、** innodb对于行的查询使用next-key lock

**2、** Next-locking keying为了解决Phantom Problem幻读问题

**3、** 当查询的索引含有唯一属性时，将next-key lock降级为record key

**4、** Gap锁设计的目的是为了阻止多个事务将记录插入到同一范围内，而这会导致幻读问题的产生

**5、** 有两种方式显式关闭gap锁：（除了外键约束和唯一性检查外，其余情况仅使用record lock） A、将事务隔离级别设置为RC B、将参数innodb_locks_unsafe_for_binlog设置为1


### 7、索引哪些情况会失效

**1、** 查询条件包含or，可能导致索引失效

**2、** 如何字段类型是字符串，where时一定用引号括起来，否则索引失效

**3、** like通配符可能导致索引失效。

**4、** 联合索引，查询时的条件列不是联合索引中的第一个列，索引失效。

**5、** 在索引列上使用MySQL的内置函数，索引失效。

**6、** 对索引列运算（如，+、-、*、/），索引失效。

**7、** 索引字段上使用（！= 或者 < >，not in）时，可能会导致索引失效。

**8、** 索引字段上使用is null， is not null，可能导致索引失效。

**9、** 左连接查询或者右连接查询查询关联的字段编码格式不一样，可能导致索引失效。

**10、** MySQL估计使用全表扫描要比使用索引快,则不使用索引。


### 8、MyISAM表格将在哪里存储，并且还提供其存储格式？

每个MyISAM表格以三种格式存储在磁盘上：

·“.frm”文件存储表定义

·数据文件具有“.MYD”（MYData）扩展名

索引文件具有“.MYI”（MYIndex）扩展名


### 9、MySQL 索引使用有哪些注意事项呢？

可以从三个维度回答这个问题：索引哪些情况会失效，索引不适合哪些场景，索引规则


### 10、主键和候选键有什么区别？

表格的每一行都由主键唯一标识,一个表只有一个主键。

主键也是候选键。按照惯例，候选键可以被指定为主键，并且可以用于任何外键引用。


### 11、创建索引的三种方式
### 12、500台db，在最快时间之内重启。
### 13、MySql, Oracle，Sql Service的区别
### 14、SQL优化的一般步骤是什么，怎么看执行计划（explain），如何理解其中各个字段的含义。
### 15、覆盖索引、回表等这些，了解过吗？
### 16、存储时期
### 17、既然提到了InnoDB使用户的B+树的索引模型
### 18、B树和B+树的区别，数据库为什么使用B+树而不是B树？
### 19、什么情况下设置了索引但无法使用
### 20、存储时期
### 21、为什么要使用视图？什么是视图？
### 22、联合索引是什么？为什么需要注意联合索引中的顺序？
### 23、视图有哪些特点？哪些使用场景？
### 24、索引的底层实现原理和优化
### 25、数据库的乐观锁和悲观锁。
### 26、隔离级别与锁的关系
### 27、说说分库与分表的设计
### 28、什么情况下设置了索引但无法使用
### 29、MySQL中 in 和 exists 区别
### 30、MySQL_fetch_array和MySQL_fetch_object的区别是什么？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)


## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
