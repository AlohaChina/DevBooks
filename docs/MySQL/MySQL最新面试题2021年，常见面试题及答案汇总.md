# MySQL最新面试题2021年，常见面试题及答案汇总

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://github.com/souyunku/DevBooks/blob/master/docs/index.md)



### 1、select for update 含义

select查询语句是不会加锁的，但是select for update除了有查询的作用外，还会加锁呢，而且它是悲观锁哦。至于加了是行锁还是表锁，这就要看是不是用了索引/主键啦。

没用索引/主键的话就是表锁，否则就是是行锁。

**1、** 原子性： 事务作为一个整体被执行，包含在其中的对数据库的操作要么全部被执行，要么都不执行。

**2、** 一致性： 指在事务开始之前和事务结束以后，数据不会被破坏，假如A账户给B账户转10块钱，不管成功与否，A和B的总金额是不变的。

**3、** 隔离性： 多个事务并发访问时，事务之间是相互隔离的，即一个事务不影响其它事务运行效果。简言之，就是事务之间是进水不犯河水的。

**4、** 持久性： 表示事务完成以后，该事务对数据库所作的操作更改，将持久地保存在数据库之中。

**「事务ACID特性的实现思想」**

原子性：是使用 undo log来实现的，如果事务执行过程中出错或者用户执行了rollback，系统通过undo log日志返回事务开始的状态。

持久性：使用 redo log来实现，只要redo log日志持久化了，当系统崩溃，即可通过redo log把数据恢复。

隔离性：通过锁以及MVCC,使事务相互隔离开。

一致性：通过回滚、恢复，以及并发情况下的隔离性，从而实现一致性。


### 2、SQL 约束有哪几种呢？

**1、** NOT NULL: 约束字段的内容一定不能为NULL。

**2、** UNIQUE: 约束字段唯一性，一个表允许有多个 Unique 约束。

**3、** PRIMARY KEY: 约束字段唯一，不可重复，一个表只允许存在一个。

**4、** FOREIGN KEY: 用于预防破坏表之间连接的动作，也能防止非法数据插入外键。

**5、** CHECK: 用于控制字段的值范围。


### 3、说说分库与分表的设计

**分库分表方案，分库分表中间件，分库分表可能遇到的问题**

**分库分表方案:**

**1、** 水平分库：以字段为依据，按照一定策略（hash、range等），将一个库中的数据拆分到多个库中。

**2、** 水平分表：以字段为依据，按照一定策略（hash、range等），将一个表中的数据拆分到多个表中。

**3、** 垂直分库：以表为依据，按照业务归属不同，将不同的表拆分到不同的库中。

**4、** 垂直分表：以字段为依据，按照字段的活跃性，将表中字段拆到不同的表（主表和扩展表）中。

**常用的分库分表中间件：**

**1、** sharding-jdbc（当当）

**2、** Mycat

**3、** TDDL（淘宝）

**4、** Oceanus(58同城数据库中间件)

**5、** vitess（谷歌开发的数据库中间件）

**6、** Atlas(Qihoo 360)

**分库分表可能遇到的问题**

**1、** 事务问题：需要用分布式事务啦

**2、** 跨节点Join的问题：解决这一问题可以分两次查询实现

**3、** 跨节点的count,order by,group by以及聚合函数问题：分别在各个节点上得到结果后在应用程序端进行合并。

**4、** 数据迁移，容量规划，扩容等问题

**5、** ID问题：数据库被切分后，不能再依赖数据库自身的主键生成机制啦，最简单可以考虑UUID

**6、** 跨分片的排序分页问题（后台加大pagesize处理？）


### 4、优化数据库的方法

**1、**  选取最适用的字段属性，尽可能减少定义字段宽度，尽量把字段设置NOTNULL，例如’省份’、’性别’最好适用ENUM

**2、**  使用连接(JOIN)来代替子查询

**3、**  适用联合(UNION)来代替手动创建的临时表

**4、**  事务处理

**5、**  锁定表、优化事务处理

**6、**  适用外键，优化锁定表

**7、**  建立索引

**8、**  优化查询语句


### 5、如何通俗地理解三个范式？

第一范式：1NF是对属性的原子性约束，要求属性具有原子性，不可再分解；

第二范式：2NF是对记录的惟一性约束，要求记录有惟一标识，即实体的惟一性；

第三范式：3NF是对字段冗余性的约束，即任何字段不能由其他字段派生出来，它要求字段没有冗余。。

范式化设计优缺点:

优点:

可以尽量得减少数据冗余，使得更新快，体积小

缺点:对于查询需要多个表进行关联，减少写得效率增加读得效率，更难进行索引优化

反范式化:

优点:可以减少表得关联，可以更好得进行索引优化

缺点:数据冗余以及数据异常，数据得修改需要更多的成本


### 6、什么是触发器？触发器的使用场景有哪些？

触发器是用户定义在关系表上的一类由事件驱动的特殊的存储过程。触发器是指一段代码，当触发某个事件时，自动执行这些代码。

**使用场景**

**1、** 可以通过数据库中的相关表实现级联更改。

**2、** 实时监控某张表中的某个字段的更改而需要做出相应的处理。

**3、** 例如可以生成某些业务的编号。

**4、** 注意不要滥用，否则会造成数据库及应用程序的维护困难。

**5、** 大家需要牢记以上基础知识点，重点是理解数据类型CHAR和VARCHAR的差异，表存储引擎InnoDB和MyISAM的区别。


### 7、数据库为什么使用B+树而不是B树

**1、** B树只适合随机检索，而B+树同时支持随机检索和顺序检索；

**2、** B+树空间利用率更高，可减少I/O次数，磁盘读写代价更低。一般来说，索引本身也很大，不可能全部存储在内存中，因此索引往往以索引文件的形式存储的磁盘上。这样的话，索引查找过程中就要产生磁盘I/O消耗。B+树的内部结点并没有指向关键字具体信息的指针，只是作为索引使用，其内部结点比B树小，盘块能容纳的结点中关键字数量更多，一次性读入内存中可以查找的关键字也就越多，相对的，IO读写次数也就降低了。而IO读写次数是影响索引检索效率的最大因素；

**3、** B+树的查询效率更加稳定。B树搜索有可能会在非叶子结点结束，越靠近根节点的记录查找时间越短，只要找到关键字即可确定记录的存在，其性能等价于在关键字全集内做一次二分查找。而在B+树中，顺序检索比较明显，随机检索时，任何关键字的查找都必须走一条从根节点到叶节点的路，所有关键字的查找路径长度相同，导致每一个关键字的查询效率相当。

**4、** B-树在提高了磁盘IO性能的同时并没有解决元素遍历的效率低下的问题。B+树的叶子节点使用指针顺序连接在一起，只要遍历叶子节点就可以实现整棵树的遍历。而且在数据库中基于范围的查询是非常频繁的，而B树不支持这样的操作。

**5、** 增删文件（节点）时，效率更高。因为B+树的叶子节点包含所有关键字，并以有序的链表结构存储，这样可很好提高增删效率。


### 8、简单总结下
### 9、B+Tree的页子节点都可以存放哪些东西？
### 10、优化WHERE子句
### 11、如何选择合适的分布式主键方案呢？
### 12、视图的缺点
### 13、SQL语言包括哪几部分？每部分都有哪些操作关键字？
### 14、数据库索引的原理，为什么要用 B+树，为什么不用二叉树？
### 15、CHAR和VARCHAR的区别？
### 16、int(20)中20的涵义
### 17、锁的优化策略
### 18、日常工作中你是怎么优化SQL的？
### 19、UNION与UNION ALL的区别？
### 20、日志的存放形式
### 21、你可以用什么来确保表格里的字段只接受特定范围里的值?
### 22、创建索引的原则？
### 23、什么情况下设置了索引但无法使用
### 24、CHAR和VARCHAR的区别？
### 25、读写分离有哪些解决方案？
### 26、MySQL中InnoDB支持的四种事务隔离级别名称，以及逐级之间的区别？
### 27、视图有哪些特点？
### 28、什么是存储过程？有哪些优缺点？
### 29、如果某个表有近千万数据，CRUD比较慢，如何优化。
### 30、MySQL的复制原理以及流程




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
