# MySQL最新面试题2021年，常见面试题及答案汇总

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)



### 1、MySQL数据库作发布系统的存储，一天五万条以上的增量，预计运维三年,怎么优化？

**1、** 设计良好的数据库结构，允许部分数据冗余，尽量避免join查询，提高效率。

**2、** 选择合适的表字段数据类型和存储引擎，适当的添加索引。

**3、** MySQL库主从读写分离。

**4、** 找规律分表，减少单表中的数据量提高查询速度。

**5、** 添加缓存机制，比如Memcached，apc等。

**6、** 不经常改动的页面，生成静态页面。

**7、** 书写高效率的SQL。比如 SELECT * FROM TABEL 改为 SELECT field_1, field_2, field_3 FROM TABLE.


### 2、视图的优点，缺点，讲一下？

**1、** 查询简单化。视图能简化用户的操作

**2、** 数据安全性。视图使用户能以多种角度看待同一数据，能够对机密数据提供安全保护

**3、** 逻辑数据独立性。视图对重构数据库提供了一定程度的逻辑独立性


### 3、列设置为AUTO INCREMENT时，如果在表中达到最大值，会发生什么情况？

它会停止递增，任何进一步的插入都将产生错误，因为密钥已被使用。


### 4、创建索引的原则

**索引虽好，但也不是无限制的使用，最好符合一下几个原则**

**1、** 最左前缀匹配原则，组合索引非常重要的原则，MySQL会一直向右匹配直到遇到范围查询(>、<、between、like)就停止匹配，比如a = 1 and b = 2 and c > 3 and d = 4 如果建立(a,b,c,d)顺序的索引，d是用不到索引的，如果建立(a,b,d,c)的索引则都可以用到，a,b,d的顺序可以任意调整。

**2、** 较频繁作为查询条件的字段才去创建索引

**3、** 更新频繁字段不适合创建索引

**4、** 若是不能有效区分数据的列不适合做索引列(如性别，男女未知，最多也就三种，区分度实在太低)

**5、** 尽量的扩展索引，不要新建索引。比如表中已经有a的索引，现在要加(a,b)的索引，那么只需要修改原来的索引即可。

**6、** 定义有外键的数据列一定要建立索引。

**7、** 对于那些查询中很少涉及的列，重复值比较多的列不要建立索引。

**8、** 对于定义为text、image和bit的数据类型的列不要建立索引。


### 5、varchar(50)中50的涵义

字段最多存放 50 个字符

如 varchar(50) 和 varchar(200) 存储 "jay" 字符串所占空间是一样的，后者在排序时会消耗更多内存


### 6、使用乐观锁

乐观锁思想就是，有线程过来，先放过去修改，如果看到别的线程没修改过，就可以修改成功，如果别的线程修改过，就修改失败或者重试。实现方式：乐观锁一般会使用版本号机制或CAS算法实现。


### 7、drop、delete与truncate的区别

delete | truncate | drop |


### 8、最左匹配原则？

在创建联合索引时候，一般需要遵循最左匹配原则。即联合索引中的属性识别度最高的放在查询语句的最前面。


### 9、MySQL的复制原理以及流程

**主从复制：**

将主数据库中的DDL和DML操作通过二进制日志（BINLOG）传输到从数据库上，然后将这些日志重新执行（重做）；从而使得从数据库的数据与主数据库保持一致。

**主从复制的作用**

**1、** 主数据库出现问题，可以切换到从数据库。

**2、** 可以进行数据库层面的读写分离。

**3、** 可以在从数据库上进行日常备份。

MySQL主从复制解决的问题

**1、** 数据分布：随意开始或停止复制，并在不同地理位置分布数据备份

**2、** 负载均衡：降低单个服务器的压力

**3、** 高可用和故障切换：帮助应用程序避免单点失败

**4、** 升级测试：可以用更高版本的MySQL作为从库

**MySQL主从复制工作原理**

**1、** 在主库上把数据更高记录到二进制日志

**2、** 从库将主库的日志复制到自己的中继日志

**3、** 从库读取中继日志的事件，将其重放到从库数据中

**基本原理流程，3个线程以及之间的关联**

**主**：

binlog线程——记录下所有改变了数据库数据的语句，放进master上的binlog中；

**从**：

io线程——在使用start slave 之后，负责从master上拉取 binlog 内容，放进自己的relay log中；

**从**：

sql执行线程——执行relay log中的语句；

**复制过程**

![](https://gitee.com/souyunkutech/souyunku-home/raw/master/images/souyunku-web/2020/5/2/049/50/99_14.png#alt=99%5C_14.png)

**Binary log：**主数据库的二进制日志

**Relay log：**从服务器的中继日志

**1、** master在每个事务更新数据完成之前，将该操作记录串行地写入到binlog文件中。

**2、** salve开启一个I/O Thread，该线程在master打开一个普通连接，主要工作是binlog dump process。如果读取的进度已经跟上了master，就进入睡眠状态并等待master产生新的事件。I/O线程最终的目的是将这些事件写入到中继日志中。

**3、** SQL Thread会读取中继日志，并顺序执行该日志中的SQL事件，从而与主数据库中的数据保持一致。


### 10、MySQL的复制原理以及流程

「主从复制原理，简言之，就三步曲，如下：」

**1、** 主数据库有个bin-log二进制文件，纪录了所有增删改Sql语句。（binlog线程）

**2、** 从数据库把主数据库的bin-log文件的sql语句复制过来。（io线程）

**3、** 从数据库的relay-log重做日志文件中再执行一次这些sql语句。（Sql执行线程）

**上图主从复制分了五个步骤进行：**

步骤一：主库的更新事件(update、insert、delete)被写到binlog

步骤二：从库发起连接，连接到主库。

步骤三：此时主库创建一个binlog dump thread，把binlog的内容发送到从库。

步骤四：从库启动之后，创建一个I/O线程，读取主库传过来的binlog内容并写入到relay log

步骤五：还会创建一个SQL线程，从relay log里面读取内容，从Exec_Master_Log_Pos位置开始执行读取到的更新事件，将更新内容写入到slave的db


### 11、什么是脏读？幻读？不可重复读？
### 12、数据库存储日期格式时，如何考虑时区转换问题？
### 13、谈谈MySQL的Explain
### 14、数据表损坏的修复方式有哪些？
### 15、优化器的执行过程？
### 16、如果一个表有一列定义为TIMESTAMP，将发生什么？
### 17、Myql中的事务回滚机制概述
### 18、Innodb的事务实现原理？
### 19、B+树在满足聚簇索引和覆盖索引的时候不需要回表查询数据，
### 20、如何写sql能够有效的使用到复合索引。
### 21、索引有哪几种类型？
### 22、数据库为什么使用B+树而不是B树
### 23、数据库的乐观锁和悲观锁。
### 24、索引有哪些优缺点？
### 25、什么是内连接、外连接、交叉连接、笛卡尔积呢？
### 26、字段为什么要求定义为not null？
### 27、drop、delete与truncate的区别
### 28、select for update有什么含义，会锁表还是锁行还是其他。
### 29、NULL是什么意思
### 30、B树和B+树的区别




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)


## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "大厂面试题")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png"大厂面试题")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
