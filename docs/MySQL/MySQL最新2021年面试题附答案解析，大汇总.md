# MySQL最新2021年面试题附答案解析，大汇总

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)



### 1、为表中得字段选择合适得数据类型

字段类型优先级: 整形>date,time>enum,char>varchar>blob,text

优先考虑数字类型，其次是日期或者二进制类型，最后是字符串类型，同级别得数据类型，应该优先选择占用空间小的数据类型



### 2、什么是非标准字符串类型？

**1、** TINYTEXT

**2、** TEXT

**3、** MEDIUMTEXT

**4、** LONGTEXT


### 3、读写分离常见方案？

应用程序根据业务逻辑来判断，增删改等写操作命令发给主库，查询命令发给备库。

利用中间件来做代理，负责对数据库的请求识别出读还是写，并分发到不同的数据库中。（如：amoeba，MySQL-proxy）


### 4、创建索引的原则？

**1、** 选择唯一性索引：唯一性索引的值是唯一的。可以更快的通过该索引来确定某条记录。

**2、** 为经常需要排序、分组、以及联合查询的列创建索引。

**3、** 为经常作为查询条件的列创建索引。

**4、** 限制索引的数目：越多的索引越导致表的查询效率变低，因为索引表在每次更新表数据的时候都会重新创建这个表的索引，表的数据越多，索引列越多，那么创建索引的时间消耗就越大。

**5、**  如果索引的值很长，那么查询的速度会受到影响。

**6、** 如果索引字段的值很长，最好使用值得前缀来进行索引。

**7、** 删除不再使用或者很少使用的索引。

**8、** 最左前缀匹配原则，非常重要的原则。

**9、** 尽量选择区分度高的列作为索引.

**10、** 索引列不能参与计算，保持列“干净”:带函数的查询不参与索引。

**11、** 尽量的扩展索引，不要新建索引。


### 5、备份计划，MySQLdump以及xtranbackup的实现原理

**备份计划**

**1、** 视库的大小来定，一般来说 100G 内的库，可以考虑使用 MySQLdump 来做，因为 MySQLdump更加轻巧灵活，备份时间选在业务低峰期，可以每天进行都进行全量备份(MySQLdump 备份出来的文件比较小，压缩之后更小)。

**2、** 100G 以上的库，可以考虑用 xtranbackup 来做，备份速度明显要比 MySQLdump 要快。一般是选择一周一个全备，其余每天进行增量备份，备份时间为业务低峰期。

**备份恢复时间**

**1、** 物理备份恢复快，逻辑备份恢复慢

**2、** 这里跟机器，尤其是硬盘的速率有关系，以下列举几个仅供参考

**3、** 20G的2分钟（MySQLdump）

**4、** 80G的30分钟(MySQLdump)

**5、** 111G的30分钟（MySQLdump)

**6、** 288G的3小时（xtra)

**7、** 3T的4小时（xtra)

**8、** 逻辑导入时间一般是备份时间的5倍以上

**备份恢复失败如何处理**

首先在恢复之前就应该做足准备工作，避免恢复的时候出错。比如说备份之后的有效性检查、权限检查、空间检查等。如果万一报错，再根据报错的提示来进行相应的调整。

**MySQLdump和xtrabackup实现原理**

**MySQLdump**

MySQLdump 属于逻辑备份。加入–single-transaction 选项可以进行一致性备份。后台进程会先设置 session 的事务隔离级别为 RR(SET SESSION TRANSACTION ISOLATION LEVELREPEATABLE READ)，之后显式开启一个事务(START TRANSACTION /*!40100 WITH CONSISTENTSNAPSHOT */)，这样就保证了该事务里读到的数据都是事务事务时候的快照。之后再把表的数据读取出来。如果加上–master-data=1 的话，在刚开始的时候还会加一个数据库的读锁(FLUSH TABLES WITH READ LOCK),等开启事务后，再记录下数据库此时 binlog 的位置(showmaster status)，马上解锁，再读取表的数据。等所有的数据都已经导完，就可以结束事务

**Xtrabackup:**

xtrabackup 属于物理备份，直接拷贝表空间文件，同时不断扫描产生的 redo 日志并保存下来。最后完成 innodb 的备份后，会做一个 flush engine logs 的操作(老版本在有 bug，在5.6 上不做此操作会丢数据)，确保所有的 redo log 都已经落盘(涉及到事务的两阶段提交

- 概念，因为 xtrabackup 并不拷贝 binlog，所以必须保证所有的 redo log 都落盘，否则可能会丢最后一组提交事务的数据)。这个时间点就是 innodb 完成备份的时间点，数据文件虽然不是一致性的，但是有这段时间的 redo 就可以让数据文件达到一致性(恢复的时候做的事情)。然后还需要 flush tables with read lock，把 myisam 等其他引擎的表给备份出来，备份完后解锁。这样就做到了完美的热备。


### 6、什么是SQL？

结构化查询语言(Structured Query Language)


### 7、使用索引查询一定能提高查询的性能吗？为什么

通常，通过索引查询数据比全表扫描要快。但是我们也必须注意到它的代价。

索引需要空间来存储，也需要定期维护， 每当有记录在表中增减或索引列被修改时，索引本身也会被修改。 这意味着每条记录的INSERT，DELETE，UPDATE将为此多付出4，5 次的磁盘I/O。 因为索引需要额外的存储空间和处理，那些不必要的索引反而会使查询反应时间变慢。使用索引查询不一定能提高查询性能，索引范围查询(INDEX RANGE SCAN)适用于两种情况:

**1、** 基于一个范围的检索，一般查询返回结果集小于表中记录数的30%

**2、** 基于非唯一性索引的检索


### 8、完整性约束包括哪些？

数据完整性(Data Integrity)是指数据的精确(Accuracy)和可靠性(Reliability)。

分为以下四类：

1.
实体完整性：规定表的每一行在表中是惟一的实体。

2.
域完整性：是指表中的列必须满足某种特定的数据类型约束，其中约束又包括取值范围、精度等规定。

3.
参照完整性：是指两个表的主关键字和外关键字的数据应一致，保证了表之间的数据的一致性，防止了数据丢失或无意义的数据在数据库中扩散。

4.
用户定义的完整性：不同的关系数据库系统根据其应用环境的不同，往往还需要一些特殊的约束条件。用户定义的完整性即是针对某个特定关系数据库的约束条件，它反映某一具体应用必须满足的语义要求。


与表有关的约束：包括列约束(NOT NULL（非空约束）)和表约束(PRIMARY KEY、foreign key、check、UNIQUE) 。


### 9、为什么要使用数据库

**数据保存在内存**

**优点：**

存取速度快

**缺点：**

数据不能永久保存

**数据保存在文件**

**优点：**

数据永久保存

**缺点：**

**1、** 速度比内存操作慢，频繁的IO操作。

**2、** 查询数据不方便

**数据保存在数据库**

**1、** 数据永久保存

**2、** 使用SQL语句，查询方便效率高。

**3、** 管理数据方便


### 10、什么是最左前缀原则？什么是最左匹配原则？

**1、** 最左前缀原则，就是最左优先，在创建多列索引时，要根据业务需求，where子句中使用最频繁的一列放在最左边。

**2、** 当我们创建一个组合索引的时候，如(k1,k2,k3)，相当于创建了（k1）、(k1,k2)和(k1,k2,k3)三个索引，这就是最左匹配原则。。


### 11、锁的优化策略
### 12、什么是存储过程？有哪些优缺点？
### 13、MySQL中有哪几种锁？
### 14、一条SQL语句在MySQL中如何执行的？
### 15、如果某个表有近千万数据，CRUD比较慢，如何优化。
### 16、索引的分类?
### 17、存储时期
### 18、MySql, Oracle，Sql Service的区别
### 19、SQL 约束有哪几种？
### 20、慢查询日志
### 21、对于关系型数据库而言，索引是相当重要的概念，请回答有关索引的几个问题：
### 22、什么是数据库连接池?为什么需要数据库连接池呢?
### 23、索引的一些潜规则
### 24、什么是游标？
### 25、覆盖索引、回表等这些，了解过吗？
### 26、列的字符串类型可以是什么？
### 27、MySQL有关权限的表都有哪几个
### 28、你怎么知道SQL语句性能是高还是低
### 29、列的字符串类型可以是什么？
### 30、优化特定类型的查询语句




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)


## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "大厂面试题")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png"大厂面试题")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
