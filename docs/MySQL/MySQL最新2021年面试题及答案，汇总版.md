# MySQL最新2021年面试题及答案，汇总版

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://github.com/souyunku/DevBooks/blob/master/docs/index.md)



### 1、一条SQL语句在MySQL中如何执行的？

先看一下MySQL的逻辑架构图吧~

![](https://user-gold-cdn.xitu.io/2020/5/23/1724037179201fe9?w=661&h=500&f=png&s=289132#alt=)

**查询语句：**

**1、** 先检查该语句是否有权限

**2、** 如果没有权限，直接返回错误信息

**3、** 如果有权限，在 MySQL8.0 版本以前，会先查询缓存。

**4、** 如果没有缓存，分析器进行词法分析，提取 sql 语句select等的关键元素。然后判断sql 语句是否有语法错误，比如关键词是否正确等等。

**5、** 优化器进行确定执行方案

**6、** 进行权限校验，如果没有权限就直接返回错误信息，如果有权限就会调用数据库引擎接口，返回执行结果。


### 2、聚簇索引和非聚簇索引，在查询数据的时候有区别吗？为什么？

聚簇索引查询会更加快些。因为主键索引树的页子节点存储的是整行数据。也就是我们需要得到的数据。而非主键索引的页子节点是主键的值，查询的主键之后，我们还需要通过主键的值再次进行查询数据。（这个过程被称之为回表）。


### 3、事务特性：

（1）原子性：即不可分割性，事务要么全部被执行，要么就全部不被执行。

（2）一致性或可串性。事务的执行使得数据库从一种正确状态转换成另一种正确状态

（3）隔离性。在事务正确提交之前，不允许把该事务对数据的任何改变提供给任何其他事务，

（4） 持久性。事务正确提交后，其结果将永久保存在数据库中，即使在事务提交后有了其他故障，事务的处理结果也会得到保存。

或者这样理解：

事务就是被绑定在一起作为一个逻辑工作单元的SQL语句分组，如果任何一个语句操作失败那么整个操作就被失败，以后操作就会回滚到操作前状态，或者是上有个节点。为了确保要么执行，要么不执行，就可以使用事务。要将有组语句作为事务考虑，就需要通过ACID测试，即原子性，一致性，隔离性和持久性。


### 4、怎么查询SQL语句是否使用了索引查询？

使用explain查询SQL语句的执行计划，通过执行计划来分析索引的使用情况。


### 5、什么是内连接、外连接、交叉连接、笛卡尔积呢？

**1、** 内连接（inner join）：取得两张表中满足存在连接匹配关系的记录。

**2、** 外连接（outer join）：取得两张表中满足存在连接匹配关系的记录，以及某张表（或两张表）中不满足匹配关系的记录。

**3、** 交叉连接（cross join）：显示两张表所有记录一一对应，没有匹配关系进行筛选，也被称为：笛卡尔积。


### 6、MySQL数据库cpu飙升的话，要怎么处理呢？

**「排查过程：」**

使用top 命令观察，确定是MySQLd导致还是其他原因。

如果是MySQLd导致的，show processlist，查看session情况，确定是不是有消耗资源的sql在运行。

找出消耗高的 sql，看看执行计划是否准确， 索引是否缺失，数据量是否太大。

**「处理：」**

kill 掉这些线程(同时观察 cpu 使用率是否下降)，

进行相应的调整(比如说加索引、改 sql、改内存参数)

重新跑这些 SQL。

**「其他情况：」**

也有可能是每个 sql 消耗资源并不多，但是突然之间，有大量的 session 连进来导致 cpu 飙升，这种情况就需要跟应用一起来分析为何连接数会激增，再做出相应的调整，比如说限制连接数等


### 7、创建索引的三种方式

**在执行CREATE TABLE时创建索引**

```
CREATE TABLE `employee` (
  `id` int(11) NOT NULL,
  `name` varchar(255) DEFAULT NULL,
  `age` int(11) DEFAULT NULL,
  `date` datetime DEFAULT NULL,
  `sex` int(1) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_name` (`name`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```

**使用ALTER TABLE命令添加索引**

```
ALTER TABLE table_name ADD INDEX index_name (column);
```

**使用CREATE INDEX命令创建**

```
CREATE INDEX index_name ON table_name (column);
```


### 8、NOW（）和CURRENT_DATE（）有什么区别？
### 9、什么叫视图？游标是什么？
### 10、存储时期
### 11、FLOAT和DOUBLE的区别是什么？
### 12、大表怎么优化？分库分表了是怎么做的？分表分库了有什么问题？有用到中间件么？他们的原理知道么？
### 13、数据库的乐观锁和悲观锁是什么？怎么实现的？
### 14、B树和B+树的区别
### 15、你是如何监控你们的数据库的？你们的慢日志都是怎么查询的？
### 16、使用索引查询一定能提高查询的性能吗？为什么
### 17、试述视图的优点？
### 18、一个6亿的表a，一个3亿的表b，通过外间tid关联，你如何最快的查询出满足条件的第50000到第50200中的这200条数据记录。
### 19、NOW（）和CURRENT_DATE（）有什么区别？
### 20、创建索引有什么原则呢？
### 21、简述在MySQL数据库中MyISAM和InnoDB的区别
### 22、非聚簇索引一定会回表查询吗？
### 23、什么是存储过程？有哪些优缺点？
### 24、读写分离常见方案？
### 25、什么是最左前缀原则？什么是最左匹配原则
### 26、什么是死锁？怎么解决？
### 27、索引能干什么?
### 28、什么是MySQL?
### 29、索引有哪几种类型？
### 30、MySQL中in 和exists的区别。




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
