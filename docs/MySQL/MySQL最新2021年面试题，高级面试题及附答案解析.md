# MySQL最新2021年面试题，高级面试题及附答案解析

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)



### 1、读写分离常见方案？

**1、** 应用程序根据业务逻辑来判断，增删改等写操作命令发给主库，查询命令发给备库。

**2、** 利用中间件来做代理，负责对数据库的请求识别出读还是写，并分发到不同的数据库中。（如：amoeba，MySQL-proxy）


### 2、为什么要使用数据库

**数据保存在内存**

**优点：**

存取速度快

**缺点：**

数据不能永久保存

**数据保存在文件**

**优点：**数据永久保存

**缺点：**

**1、** 速度比内存操作慢，频繁的IO操作。

**2、** 查询数据不方便

**数据保存在数据库**

**1、** 数据永久保存

**2、** 使用SQL语句，查询方便效率高。

**3、** 管理数据方便


### 3、CHAR和VARCHAR的区别？

1.CHAR和VARCHAR类型在存储和检索方面有所不同

2.CHAR列长度固定为创建表时声明的长度，长度值范围是1到255

当CHAR值被存储时，它们被用空格填充到特定长度，检索CHAR值时需删除尾随空格。


### 4、B+树在满足聚簇索引和覆盖索引的时候不需要回表查询数据？


> - 在B+树的索引中，叶子节点可能存储了当前的key值，也可能存储了当前的key值以及整行的数据，这就是聚簇索引和非聚簇索引。 在InnoDB中，只有主键索引是聚簇索引，如果没有主键，则挑选一个唯一键建立聚簇索引。如果没有唯一键，则隐式的生成一个键来建立聚簇索引。
> - 当查询使用聚簇索引时，在对应的叶子节点，可以获取到整行数据，因此不用再次进行回表查询。




### 5、前缀索引

**1、** 语法：`index(field(10))`，使用字段值的前10个字符建立索引，默认是使用字段的全部内容建立索引。

**2、** 前提：前缀的标识度高。比如密码就适合建立前缀索引，因为密码几乎各不相同。

**3、** 实操的难度：在于前缀截取的长度。

**4、** 我们可以利用`select count(*)/count(distinct left(password,prefixLen));`，通过从调整`prefixLen`的值（从1自增）查看不同前缀长度的一个平均匹配度，接近1时就可以了（表示一个密码的前`prefixLen`个字符几乎能确定唯一一条记录）


### 6、什么是死锁？怎么解决？

死锁是指两个或多个事务在同一资源上相互占用，并请求锁定对方的资源，从而导致恶性循环的现象。看图形象一点，如下：

![](https://user-gold-cdn.xitu.io/2020/5/23/17241317342078b9?w=641&h=575&f=png&s=133003#alt=)

死锁有四个必要条件：互斥条件，请求和保持条件，环路等待条件，不剥夺条件。

**解决死锁思路，一般就是切断环路，尽量避免并发形成环路。**

**1、** 如果不同程序会并发存取多个表，尽量约定以相同的顺序访问表，可以大大降低死锁机会。

**2、** 在同一个事务中，尽可能做到一次锁定所需要的所有资源，减少死锁产生概率；

**3、** 对于非常容易产生死锁的业务部分，可以尝试使用升级锁定颗粒度，通过表级锁定来减少死锁产生的概率；

**4、** 如果业务处理不好可以用分布式事务锁或者使用乐观锁

**5、** 死锁与索引密不可分，解决索引问题，需要合理优化你的索引，



### 7、一个6亿的表a，一个3亿的表b，通过外间tid关联，你如何最快的查询出满足条件的第50000到第50200中的这200条数据记录。

**1、** 如果A表TID是自增长,并且是连续的,B表的ID为索引 select * from a,b where a.tid = b.id and a.tid>500000 limit 200;

**2、** 如果A表的TID不是连续的,那么就需要使用覆盖索引.TID要么是主键,要么是辅助索引,B表ID也需要有索引。 select * from b , (select tid from a limit 50000,200) a where b.id = a .tid;


### 8、NOW（）和CURRENT_DATE（）有什么区别？

**1、** NOW（）命令用于显示当前年份，月份，日期，小时，分钟和秒。

**2、** CURRENT_DATE（）仅显示当前年份，月份和日期。


### 9、B树和B+树的区别，数据库为什么使用B+树而不是B树？

在B树中，键和值即存放在内部节点又存放在叶子节点；在B+树中，内部节点只存键，叶子节点则同时存放键和值。

B+树的叶子节点有一条链相连，而B树的叶子节点各自独立的。

B+树索引的所有数据均存储在叶子节点，而且数据是按照顺序排列的，链表连着的。那么B+树使得范围查找，排序查找，分组查找以及去重查找变得异常简单。.

B+树非叶子节点上是不存储数据的，仅存储键值，而B树节点中不仅存储键值，也会存储数据。innodb中页的默认大小是16KB，如果不存储数据，那么就会存储更多的键值，相应的树的阶数（节点的子节点树）就会更大，树就会更矮更胖，如此一来我们查找数据进行磁盘的IO次数有会再次减少，数据查询的效率也会更快.


### 10、聚集索引与非聚集索引的区别

**1、** 一个表中只能拥有一个聚集索引，而非聚集索引一个表可以存在多个。

**2、** 聚集索引，索引中键值的逻辑顺序决定了表中相应行的物理顺序；非聚集索引，索引中索引的逻辑顺序与磁盘上行的物理存储顺序不同。

**3、** 索引是通过二叉树的数据结构来描述的，我们可以这么理解聚簇索引：索引的叶节点就是数据节点。而非聚簇索引的叶节点仍然是索引节点，只不过有一个指针指向对应的数据块。

**4、** 聚集索引：物理存储按照索引排序；非聚集索引：物理存储不按照索引排序；


### 11、MySQL 分页
### 12、六种关联查询
### 13、主键使用自增ID还是UUID？
### 14、使用B+树的好处
### 15、FLOAT和DOUBLE的区别是什么？
### 16、如何优化长难的查询语句？有实战过吗？
### 17、MVCC熟悉吗，它的底层原理？
### 18、Hash索引和B+树所有有什么区别或者说优劣呢?
### 19、解释MySQL外连接、内连接与自连接的区别
### 20、组合索引是什么？为什么需要注意组合索引中的顺序？
### 21、MySQL数据库cpu飙升的话，要怎么处理呢？
### 22、什么是死锁？怎么解决？
### 23、存储引擎选择
### 24、存储引擎分类有哪些以及使用场景？
### 25、索引是什么?
### 26、怎样才能找出最后一次插入时分配了哪个自动增量？
### 27、关心过业务系统里面的sql耗时吗？统计过慢查询吗？对慢查询都怎么优化过？
### 28、索引设计的原则？
### 29、B+ Tree索引和Hash索引区别？
### 30、MySQL 遇到过死锁问题吗，你是如何解决的？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)


## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "大厂面试题")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png"大厂面试题")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
