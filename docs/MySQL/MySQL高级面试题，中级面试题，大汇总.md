# MySQL高级面试题，中级面试题，大汇总

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)



### 1、说一下大表查询的优化方案

**1、** 优化shema、sql语句+索引；

**2、** 可以考虑加缓存，Memcached, Redis，或者JVM本地缓存；

**3、** 主从复制，读写分离；

**4、** 分库分表；


### 2、一条Sql的执行顺序？

![](https://user-gold-cdn.xitu.io/2020/5/24/17243f19b75d3514?w=790&h=877&f=png&s=85634#alt=)


### 3、MySQL数据库cpu飙升到500%的话他怎么处理？

**1、** 当 cpu 飙升到 500%时，先用操作系统命令 top 命令观察是不是 MySQLd 占用导致的，如果不是，找出占用高的进程，并进行相关处理。

**2、** 如果是 MySQLd 造成的， show processlist，看看里面跑的 session 情况，是不是有消耗资源的 sql 在运行。找出消耗高的 sql，看看执行计划是否准确， index 是否缺失，或者实在是数据量太大造成。

**3、** 一般来说，肯定要 kill 掉这些线程(同时观察 cpu 使用率是否下降)，等进行相应的调整(比如说加索引、改 sql、改内存参数)之后，再重新跑这些 SQL。

**4、** 也有可能是每个 sql 消耗资源并不多，但是突然之间，有大量的 session 连进来导致 cpu 飙升，这种情况就需要跟应用一起来分析为何连接数会激增，再做出相应的调整，比如说限制连接数等


### 4、什么是触发器？触发器的使用场景有哪些？

「触发器」，指一段代码，当触发某个事件时，自动执行这些代码。

**「使用场景：」**

**1、** 可以通过数据库中的相关表实现级联更改。

**2、** 实时监控某张表中的某个字段的更改而需要做出相应的处理。

**3、** 例如可以生成某些业务的编号。

**4、** 注意不要滥用，否则会造成数据库及应用程序的维护困难。


### 5、锁的优化策略

**1、** 读写分离

**2、** 分段加锁

**3、** 减少锁持有的时间

4.多个线程尽量以相同的顺序去获取资源

不能将锁的粒度过于细化，不然可能会出现线程的加锁和释放次数过多，反而效率不如一次加一把大锁。


### 6、什么情况下设置了索引但无法使用

1.以“%”开头的LIKE语句，模糊匹配

2\、OR语句前后没有同时使用索引

3\、数据类型出现隐式转化（如varchar不加单引号的话可能会自动转换为int型）


### 7、索引分类？

**单列索引**

**1、** 普通索引：MySQL中基本索引类型，没有什么限制，允许在定义索引的列中插入重复值和空值，纯粹为了查询数据更快一点。

**2、** 唯一索引：索引列中的值必须是唯一的，但是允许为空值，

**3、** 主键索引：是一种特殊的唯一索引，不允许有空值。

**组合索引：**

多个字段组合上创建的索引，只有在查询条件中使用了这些字段的左边字段时，索引才会被使用，使用组合索引时遵循最左前缀集合。

**全文索引：**

只有在MyISAM引擎上才能使用，只能在CHAR,VARCHAR,TEXT    类型字段上使用全文索引，介绍了要求，说说什么是全文索引，就是在一堆文字中，通过其中的某个关键字等，就能找到该字段所属的记录行，比如有"你是个靓仔，靓女 ..."   通过靓仔，可能就可以找到该条记录

**空间索引：**

空间索引是对空间数据类型的字段建立的索引，MySQL中的空间数据类型有四种，GEOMETRY、POINT、LINESTRING、POLYGON。在创建空间索引时，使用SPATIAL关键字。要求，引擎为MyISAM，创建空间索引的列，必须将其声明为NOT NULL。


### 8、完整性约束包括哪些？

数据完整性(Data Integrity)是指数据的精确(Accuracy)和可靠性(Reliability)。

**分为以下四类：**

**1、** 实体完整性：规定表的每一行在表中是惟一的实体。

**2、** 域完整性：是指表中的列必须满足某种特定的数据类型约束，其中约束又包括取值范围、精度等规定。

**3、** 参照完整性：是指两个表的主关键字和外关键字的数据应一致，保证了表之间的数据的一致性，防止了数据丢失或无意义的数据在数据库中扩散。

**4、** 用户定义的完整性：不同的关系数据库系统根据其应用环境的不同，往往还需要一些特殊的约束条件。用户定义的完整性即是针对某个特定关系数据库的约束条件，它反映某一具体应用必须满足的语义要求。

与表有关的约束：包括列约束(NOT NULL（非空约束）)和表约束(PRIMARY KEY、foreign key、check、UNIQUE) 。


### 9、NOW（）和CURRENT_DATE（）有什么区别？

NOW（）命令用于显示当前年份，月份，日期，小时，分钟和秒。

CURRENT_DATE（）仅显示当前年份，月份和日期。


### 10、什么是通用SQL函数？

**1、** CONCAT(A, B) – 连接两个字符串值以创建单个字符串输出。通常用于将两个或多个字段合并为一个字段。

**2、** FORMAT(X, D)- 格式化数字X到D有效数字。

**3、** CURRDATE(), CURRTIME()- 返回当前日期或时间。

**4、** NOW（） – 将当前日期和时间作为一个值返回。

**5、** MONTH（），DAY（），YEAR（），WEEK（），WEEKDAY（） – 从日期值中提取给定数据。

**6、** HOUR（），MINUTE（），SECOND（） – 从时间值中提取给定数据。

**7、** DATEDIFF（A，B） – 确定两个日期之间的差异，通常用于计算年龄

**8、** SUBTIMES（A，B） – 确定两次之间的差异。

**9、** FROMDAYS（INT） – 将整数天数转换为日期值。


### 11、MVCC熟悉吗，它的底层原理？
### 12、MySQL的复制原理以及流程
### 13、数据库中间件了解过吗，sharding jdbc，mycat？
### 14、什么是数据库连接池?为什么需要数据库连接池呢?
### 15、优化UNION查询
### 16、优化WHERE子句
### 17、MySQL5.6和MySQL5.7对索引做了哪些优化？
### 18、隔离级别与锁的关系
### 19、简单描述MySQL中，索引，主键，唯一索引，联合索引的区别，对数据库的性能有什么影响（从读写两方面）
### 20、既然提到了InnoDB使用户的B+树的索引模型
### 21、主键使用自增ID还是UUID，为什么？
### 22、NULL是什么意思
### 23、MySQL有关权限的表都有哪几个？
### 24、4.说说分库与分表的设计
### 25、视图有哪些特点？哪些使用场景？
### 26、优化特定类型的查询语句
### 27、int(20)中20的涵义
### 28、什么是游标？
### 29、你是如何监控你们的数据库的？你们的慢日志都是怎么查询的？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)


## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "大厂面试题")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png"大厂面试题")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
