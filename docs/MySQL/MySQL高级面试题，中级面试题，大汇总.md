# MySQL高级面试题，中级面试题，大汇总

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://github.com/souyunku/DevBooks/blob/master/docs/index.md)



### 1、如何写sql能够有效的使用到复合索引。

复合索引，也叫组合索引，用户可以在多个列上建立索引,这种索引叫做复合索引。

当我们创建一个组合索引的时候，如(k1,k2,k3)，相当于创建了（k1）、(k1,k2)和(k1,k2,k3)三个索引，这就是最左匹配原则。

```
select * from table where k1=A AND k2=B AND k3=D
```

有关于复合索引，我们需要关注查询Sql条件的顺序，确保最左匹配原则有效，同时可以删除不必要的冗余索引。


### 2、Myql中的事务回滚机制概述

事务是用户定义的一个数据库操作序列，这些操作要么全做要么全不做，是一个不可分割的工作单位，事务回滚是指将该事务已经完成的对数据库的更新操作撤销。

要同时修改数据库中两个不同表时，如果它们不是一个事务的话，当第一个表修改完，可能第二个表修改过程中出现了异常而没能修改，此时就只有第二个表依旧是未修改之前的状态，而第一个表已经被修改完毕。而当你把它们设定为一个事务的时候，当第一个表修改完，第二表修改出现异常而没能修改，第一个表和第二个表都要回到未修改的状态，这就是所谓的事务回滚


### 3、优化子查询

**1、** 用关联查询替代

**2、** 优化GROUP BY和DISTINCT

**3、** 这两种查询据可以使用索引来优化，是最有效的优化方法

**4、** 关联查询中，使用标识列分组的效率更高

**5、** 如果不需要ORDER BY，进行GROUP BY时加ORDER BY NULL，MySQL不会再进行文件排序。

**6、** WITH ROLLUP超级聚合，可以挪到应用程序处理


### 4、B+Tree的页子节点都可以存放哪些东西？

innoDB的B+Tree可能存储的是整行数据，也有可能是主键的值。


### 5、InnoDB存储引擎的锁的算法有三种

**1、** Record lock：单个行记录上的锁

**2、** Gap lock：间隙锁，锁定一个范围，不包括记录本身

**3、** Next-key lock：record+gap 锁定一个范围，包含记录本身

**相关知识点：**

**1、** innodb对于行的查询使用next-key lock

**2、** Next-locking keying为了解决Phantom Problem幻读问题

**3、** 当查询的索引含有唯一属性时，将next-key lock降级为record key

**4、** Gap锁设计的目的是为了阻止多个事务将记录插入到同一范围内，而这会导致幻读问题的产生

**5、** 有两种方式显式关闭gap锁：（除了外键约束和唯一性检查外，其余情况仅使用record lock） A、将事务隔离级别设置为RC B、将参数innodb_locks_unsafe_for_binlog设置为1


### 6、说一下大表查询的优化方案

**1、** 优化shema、sql语句+索引；

**2、** 可以考虑加缓存，Memcached, Redis，或者JVM本地缓存；

**3、** 主从复制，读写分离；

**4、** 分库分表；


### 7、数据库自增主键可能遇到什么问题。

使用自增主键对数据库做分库分表，可能出现诸如主键重复等的问题。解决方案的话，简单点的话可以考虑使用UUID哈

自增主键会产生表锁，从而引发问题

自增主键可能用完问题。


### 8、既然提到了InnoDB使用户的B+树的索引模型

**那么你知道为什么采用B+树吗？这和Hash索引比较起来有什么缺点吗？**

因为hash索引底层是哈希表，哈希表是一种以key-value存储数据的结构，所以多个数据在存储关系上是完全没有任何顺序关系的，所以，对于区间查询是无法直接通过索引查询的，就需要全表扫描。所以，哈希索引只适用于等值查询的场景。而B+树是一种多路平衡查询树，所以他的节点是天然有序的（左子节点小于父节点，父节点小于右子节点），所以对于范围查询的时候不需要做全表扫描。


### 9、SQL 约束有哪几种？

> SQL 约束有哪几种？


**1、** NOT NULL: 用于控制字段的内容一定不能为空（NULL）。

**2、** UNIQUE: 控件字段内容不能重复，一个表允许有多个 Unique 约束。

**3、** PRIMARY KEY: 也是用于控件字段内容不能重复，但它在一个表只允许出现一个。

**4、** FOREIGN KEY: 用于预防破坏表之间连接的动作，也能防止非法数据插入外键列，因为它必须是它指向的那个表中的值之一。

**5、** CHECK: 用于控制字段的值范围。


### 10、你怎么看到为表格定义的所有索引？

索引是通过以下方式为表格定义的：

SHOW INDEX FROM

;


### 11、使用B树的好处
### 12、什么是存储过程？有哪些优缺点？
### 13、什么是内连接、外连接、交叉连接、笛卡尔积呢？
### 14、什么是锁？
### 15、InnoDB引擎的4大特性
### 16、如果要存储用户的密码散列，应该使用什么字段进行存储？
### 17、MySQL 的内连接、左连接、右连接有什么区别？
### 18、varchar(50)中50的涵义
### 19、简述有哪些索引和作用
### 20、为什么要使用数据库
### 21、从锁的类别角度讲，MySQL都有哪些锁呢？
### 22、MySQL的binlog有几种录入格式？分别有什么区别？
### 23、MySQL中in 和exists的区别。
### 24、MySQL事务得四大特性以及实现原理
### 25、对于关系型数据库而言，索引是相当重要的概念，请回答有关索引的几个问题：
### 26、MySQL支持事务吗？
### 27、优化UNION查询
### 28、SQL的生命周期？
### 29、什么是幻读，脏读，不可重复读呢？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
