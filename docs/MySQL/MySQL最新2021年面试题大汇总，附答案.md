# MySQL最新2021年面试题大汇总，附答案

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://github.com/souyunku/DevBooks/blob/master/docs/index.md)



### 1、聚簇索引和非聚簇索引，在查询数据的时候有区别吗？为什么？

聚簇索引查询会更加快些。因为主键索引树的页子节点存储的是整行数据。也就是我们需要得到的数据。而非主键索引的页子节点是主键的值，查询的主键之后，我们还需要通过主键的值再次进行查询数据。（这个过程被称之为回表）。


### 2、如何优化长难的查询语句？有实战过吗？

**1、** 将一个大的查询分为多个小的相同的查询

**2、** 减少冗余记录的查询。

**3、** 一个复杂查询可以考虑拆成多个简单查询

**4、** 分解关联查询，让缓存的效率更高。


### 3、MySQL中InnoDB引擎的行锁是怎么实现的？

**InnoDB是基于索引来完成行锁**

例:

`select \* from tab\_with\_index where id = 1 for update;`

for update 可以根据条件来完成行锁锁定，并且 id 是有索引键的列，如果 id 不是索引键那么InnoDB将完成表锁，并发将无从谈起


### 4、varchar与char的区别

**char的特点**

**1、** char表示定长字符串，长度是固定的；

**2、** 如果插入数据的长度小于char的固定长度时，则用空格填充；

**3、** 因为长度固定，所以存取速度要比varchar快很多，甚至能快50%，但正因为其长度固定，所以会占据多余的空间，是空间换时间的做法；

**4、** 对于char来说，最多能存放的字符个数为255，和编码无关

**varchar的特点**

**1、** varchar表示可变长字符串，长度是可变的；

**2、** 插入的数据是多长，就按照多长来存储；

**3、** varchar在存取方面与char相反，它存取慢，因为长度不固定，但正因如此，不占据多余的空间，是时间换空间的做法；

**4、** 对于varchar来说，最多能存放的字符个数为65532

**总之**

结合性能角度（char更快）和节省磁盘空间角度（varchar更小），具体情况还需具体来设计数据库才是妥当的做法


### 5、什么是基本表？什么是视图？

基本表是本身独立存在的表，在 SQL 中一个关系就对应一个表。 视图是从一个或几个基本表导出的表。视图本身不独立存储在数据库中，是一个虚表


### 6、索引有哪几种类型？

**主键索引:** 数据列不允许重复，不允许为NULL，一个表只能有一个主键。

**唯一索引:** 数据列不允许重复，允许为NULL值，一个表允许多个列创建唯一索引。

**1、** 可以通过 `ALTER TABLE table_name ADD UNIQUE (column);` 创建唯一索引

**2、** 可以通过 `ALTER TABLE table_name ADD UNIQUE (column1,column2);` 创建唯一组合索引

**普通索引:** 基本的索引类型，没有唯一性的限制，允许为NULL值。

**1、** 可以通过`ALTER TABLE table_name ADD INDEX index_name (column);`创建普通索引

**2、** 可以通过`ALTER TABLE table_name ADD INDEX index_name(column1, column2, column3);`创建组合索引

**全文索引：** 是目前搜索引擎使用的一种关键技术。

可以通过`ALTER TABLE table_name ADD FULLTEXT (column);`创建全文索引


### 7、Innodb的事务与日志的实现方式


### 8、100.MySQL一条SQL加锁分析

一条SQL加锁，可以分9种情况进行：

**1、** 组合一：id列是主键，RC隔离级别

**2、** 组合二：id列是二级唯一索引，RC隔离级别

**3、** 组合三：id列是二级非唯一索引，RC隔离级别

**4、** 组合四：id列上没有索引，RC隔离级别

**5、** 组合五：id列是主键，RR隔离级别

**6、** 组合六：id列是二级唯一索引，RR隔离级别

**7、** 组合七：id列是二级非唯一索引，RR隔离级别

**8、** 组合八：id列上没有索引，RR隔离级别

**9、** 组合九：Serializable隔离级别


### 9、完整性约束包括哪些？

数据完整性(Data Integrity)是指数据的精确(Accuracy)和可靠性(Reliability)。

**分为以下四类：**

**1、** 实体完整性：规定表的每一行在表中是惟一的实体。

**2、** 域完整性：是指表中的列必须满足某种特定的数据类型约束，其中约束又包括取值范围、精度等规定。

**3、** 参照完整性：是指两个表的主关键字和外关键字的数据应一致，保证了表之间的数据的一致性，防止了数据丢失或无意义的数据在数据库中扩散。

**4、** 用户定义的完整性：不同的关系数据库系统根据其应用环境的不同，往往还需要一些特殊的约束条件。用户定义的完整性即是针对某个特定关系数据库的约束条件，它反映某一具体应用必须满足的语义要求。

与表有关的约束：包括列约束(NOT NULL（非空约束）)和表约束(PRIMARY KEY、foreign key、check、UNIQUE) 。


### 10、B+树在满足聚簇索引和覆盖索引的时候不需要回表查询数据？


> - 在B+树的索引中，叶子节点可能存储了当前的key值，也可能存储了当前的key值以及整行的数据，这就是聚簇索引和非聚簇索引。 在InnoDB中，只有主键索引是聚簇索引，如果没有主键，则挑选一个唯一键建立聚簇索引。如果没有唯一键，则隐式的生成一个键来建立聚簇索引。
> - 当查询使用聚簇索引时，在对应的叶子节点，可以获取到整行数据，因此不用再次进行回表查询。




### 11、什么是索引？
### 12、drop、delete与truncate的区别
### 13、MySQL的复制原理以及流程
### 14、覆盖索引、回表等这些，了解过吗？
### 15、NOW（）和CURRENT_DATE（）有什么区别？
### 16、解释MySQL外连接、内连接与自连接的区别
### 17、B+ Tree索引和Hash索引区别？
### 18、慢查询日志
### 19、说说分库与分表的设计
### 20、MySQL的binlog有几种录入格式？分别有什么区别？
### 21、读写分离常见方案？
### 22、Hash索引和B+树所有有什么区别或者说优劣呢?
### 23、非主键索引一定会查询多次吗？
### 24、MySQL如何获取当前日期？
### 25、覆盖索引是什么？
### 26、什么是聚簇索引？何时使用聚簇索引与非聚簇索引
### 27、500台db，在最快时间之内重启。
### 28、MySQL中有哪几种锁，列举一下？
### 29、MySQL自增主键用完了怎么办？
### 30、在高并发情况下，如何做到安全的修改同一行数据？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
