# MySQL最新2021年面试题大汇总，附答案

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)



### 1、什么是幻读，脏读，不可重复读呢？

**1、** 事务A、B交替执行，事务A被事务B干扰到了，因为事务A读取到事务B未提交的数据,这就是**脏读**

**2、** 在一个事务范围内，两个相同的查询，读取同一条记录，却返回了不同的数据，这就是**不可重复读**。

**3、** 事务A查询一个范围的结果集，另一个并发事务B往这个范围中插入/删除了数据，并静悄悄地提交，然后事务A再次查询相同的范围，两次读取得到的结果集不一样了，这就是**幻读**。


### 2、为什么要使用视图？什么是视图？

为了提高复杂SQL语句的复用性和表操作的安全性，MySQL数据库管理系统提供了视图特性。所谓视图，本质上是一种虚拟表，在物理上是不存在的，其内容与真实的表相似，包含一系列带有名称的列和行数据。但是，视图并不在数据库中以储存的数据值形式存在。行和列数据来自定义视图的查询所引用基本表，并且在具体引用视图时动态生成。

视图使开发者只关心感兴趣的某些特定数据和所负责的特定任务，只能看到视图中所定义的数据，而不是视图所引用表中的数据，从而提高了数据库中数据的安全性。


### 3、MySQL中有哪几种锁，列举一下？

![](https://user-gold-cdn.xitu.io/2020/5/23/17240a13fa147bea?w=1280&h=687&f=png&s=248056#alt=)

**如果按锁粒度划分，有以下3种：**

**1、** 表锁： 开销小，加锁快；锁定力度大，发生锁冲突概率高，并发度最低;不会出现死锁。

**2、** 行锁： 开销大，加锁慢；会出现死锁；锁定粒度小，发生锁冲突的概率低，并发度高。

**3、** 页锁： 开销和加锁速度介于表锁和行锁之间；会出现死锁；锁定粒度介于表锁和行锁之间，并发度一般


### 4、说说分库与分表的设计

**分库分表方案，分库分表中间件，分库分表可能遇到的问题**

**分库分表方案:**

**1、** 水平分库：以字段为依据，按照一定策略（hash、range等），将一个库中的数据拆分到多个库中。

**2、** 水平分表：以字段为依据，按照一定策略（hash、range等），将一个表中的数据拆分到多个表中。

**3、** 垂直分库：以表为依据，按照业务归属不同，将不同的表拆分到不同的库中。

**4、** 垂直分表：以字段为依据，按照字段的活跃性，将表中字段拆到不同的表（主表和扩展表）中。

**常用的分库分表中间件：**

**1、** sharding-jdbc（当当）

**2、** Mycat

**3、** TDDL（淘宝）

**4、** Oceanus(58同城数据库中间件)

**5、** vitess（谷歌开发的数据库中间件）

**6、** Atlas(Qihoo 360)

**分库分表可能遇到的问题**

**1、** 事务问题：需要用分布式事务啦

**2、** 跨节点Join的问题：解决这一问题可以分两次查询实现

**3、** 跨节点的count,order by,group by以及聚合函数问题：分别在各个节点上得到结果后在应用程序端进行合并。

**4、** 数据迁移，容量规划，扩容等问题

**5、** ID问题：数据库被切分后，不能再依赖数据库自身的主键生成机制啦，最简单可以考虑UUID

**6、** 跨分片的排序分页问题（后台加大pagesize处理？）


### 5、日常工作中你是怎么优化SQL的？

可以从这几个维度回答这个问题：

**1、** 加索引

**2、** 避免返回不必要的数据

**3、** 适当分批量进行

**4、** 优化sql结构

**5、** 分库分表

**6、** 读写分离


### 6、MySQL中InnoDB引擎的行锁是怎么实现的？

**InnoDB是基于索引来完成行锁**

例:

`select \* from tab\_with\_index where id = 1 for update;`

for update 可以根据条件来完成行锁锁定，并且 id 是有索引键的列，如果 id 不是索引键那么InnoDB将完成表锁，并发将无从谈起


### 7、SQL注入漏洞产生的原因？如何防止？

SQL注入产生的原因：程序开发过程中不注意规范书写sql语句和对特殊字符进行过滤，导致客户端可以通过全局变量POST和GET提交一些sql语句正常执行。

**防止SQL注入的方式：**

**1、** 开启配置文件中的magic_quotes_gpc 和 magic_quotes_runtime设置

**2、** 执行sql语句时使用addslashes进行sql语句转换

**3、** Sql语句书写尽量不要省略双引号和单引号。

**4、** 过滤掉sql语句中的一些关键词：update、insert、delete、select、 * 。

**5、** 提高数据库表和字段的命名技巧，对一些重要的字段根据程序的特点命名，取不易被猜到的。


### 8、MySQL中TEXT数据类型的最大长度

**1、** TINYTEXT：256 bytes

**2、** TEXT：65,535 bytes(64kb)

**3、** MEDIUMTEXT：16,777,215 bytes(16MB)

**4、** LONGTEXT：4,294,967,295 bytes(4GB)

**1、** 
### 9、MySQL 索引使用有哪些注意事项呢？

可以从三个维度回答这个问题：索引哪些情况会失效，索引不适合哪些场景，索引规则

**索引哪些情况会失效**

**1、** 查询条件包含or，可能导致索引失效

**2、** 如何字段类型是字符串，where时一定用引号括起来，否则索引失效

**3、** like通配符可能导致索引失效。

**4、** 联合索引，查询时的条件列不是联合索引中的第一个列，索引失效。

**5、** 在索引列上使用MySQL的内置函数，索引失效。

**6、** 对索引列运算（如，+、-、*、/），索引失效。

**7、** 索引字段上使用（！= 或者 < >，not in）时，可能会导致索引失效。

**8、** 索引字段上使用is null， is not null，可能导致索引失效。

**9、** 左连接查询或者右连接查询查询关联的字段编码格式不一样，可能导致索引失效。

**10、** MySQL估计使用全表扫描要比使用索引快,则不使用索引。

**索引不适合哪些场景**

**1、** 数据量少的不适合加索引

**2、** 更新比较频繁的也不适合加索引

**3、** 区分度低的字段不适合加索引（如性别）

**索引的一些潜规则**

**1、** 覆盖索引

2、回表

**3、** 索引数据结构（B+树）

**4、** 最左前缀原则

**5、** 索引下推


### 10、简述在MySQL数据库中MyISAM和InnoDB的区别

MyISAM：

不支持事务，但是每次查询都是原子的；

支持表级锁，即每次操作是对整个表加锁；

存储表的总行数；

一个MYISAM表有三个文件：索引文件、表结构文件、数据文件；

采用菲聚集索引，索引文件的数据域存储指向数据文件的指针。辅索引与主索引基本一致，但是辅索引不用保证唯一性。

InnoDb：

支持ACID的事务，支持事务的四种隔离级别；

支持行级锁及外键约束：因此可以支持写并发；

不存储总行数；

一个InnoDb引擎存储在一个文件空间（共享表空间，表大小不受操作系统控制，一个表可能分布在多个文件里），也有可能为多个（设置为独立表空，表大小受操作系统文件大小限制，一般为2G），受操作系统文件大小的限制；

主键索引采用聚集索引（索引的数据域存储数据文件本身），辅索引的数据域存储主键的值；因此从辅索引查找数据，需要先通过辅索引找到主键值，再访问辅索引；最好使用自增主键，防止插入数据时，为维持B+树结构，文件的大调整。


### 11、什么是数据库事务？
### 12、MySQL里记录货币用什么字段类型好
### 13、什么是存储过程？有哪些优缺点？
### 14、InnoDB引擎的4大特性，了解过吗
### 15、MySQL 索引使用有哪些注意事项呢？
### 16、B+树在满足聚簇索引和覆盖索引的时候不需要回表查询数据？
### 17、limit 1000000 加载很慢的话，你是怎么解决的呢？
### 18、InnoDB引擎中的索引策略，了解过吗？
### 19、创建索引有什么原则呢？
### 20、SQL语句主要分为哪几类
### 21、MySQL数据库作发布系统的存储，一天五万条以上的增量，预计运维三年,怎么优化？
### 22、优化数据库的方法
### 23、优化数据库的方法
### 24、事务的隔离级别有哪些？MySQL的默认隔离级别是什么？
### 25、数据库三大范式是什么
### 26、MySQL的binlog有有几种录入格式？分别有什么区别？
### 27、varchar(50)中50的涵义
### 28、简单描述MySQL中，索引，主键，唯一索引，联合索引的区别，对数据库的性能有什么影响（从读写两方面）
### 29、实践中如何优化MySQL
### 30、UNION与UNION ALL的区别？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)


## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "大厂面试题")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png"大厂面试题")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
