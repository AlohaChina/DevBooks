# MySQL最新2021年面试题大汇总，附答案

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)



### 1、简述在MySQL数据库中MyISAM和InnoDB的区别

**MyISAM：**

不支持事务，但是每次查询都是原子的；

支持表级锁，即每次操作是对整个表加锁；

**存储表的总行数；**

一个MYISAM表有三个文件：索引文件、表结构文件、数据文件；

采用菲聚集索引，索引文件的数据域存储指向数据文件的指针。辅索引与主索引基本一致，但是辅索引不用保证唯一性。

**InnoDb：**

支持ACID的事务，支持事务的四种隔离级别；

支持行级锁及外键约束：因此可以支持写并发；

**不存储总行数：**

一个InnoDb引擎存储在一个文件空间（共享表空间，表大小不受操作系统控制，一个表可能分布在多个文件里），也有可能为多个（设置为独立表空，表大小受操作系统文件大小限制，一般为2G），受操作系统文件大小的限制；

主键索引采用聚集索引（索引的数据域存储数据文件本身），辅索引的数据域存储主键的值；因此从辅索引查找数据，需要先通过辅索引找到主键值，再访问辅索引；最好使用自增主键，防止插入数据时，为维持B+树结构，文件的大调整。


### 2、数据库结构优化

**1、** 一个好的数据库设计方案对于数据库的性能往往会起到事半功倍的效果。

**2、** 需要考虑数据冗余、查询和更新的速度、字段的数据类型是否合理等多方面的内容。

**将字段很多的表分解成多个表**

**1、** 对于字段较多的表，如果有些字段的使用频率很低，可以将这些字段分离出来形成新表。

**2、** 因为当一个表的数据量很大时，会由于使用频率低的字段的存在而变慢。

**增加中间表**

**1、** 对于需要经常联合查询的表，可以建立中间表以提高查询效率。

**2、** 通过建立中间表，将需要通过联合查询的数据插入到中间表中，然后将原来的联合查询改为对中间表的查询。

**增加冗余字段**

设计数据表时应尽量遵循范式理论的规约，尽可能的减少冗余字段，让数据库设计看起来精致、优雅。但是，合理的加入冗余字段可以提高查询速度。

表的规范化程度越高，表和表之间的关系越多，需要连接查询的情况也就越多，性能也就越差。

**注意：**

`冗余字段的值在一个表中修改了，就要想办法在其他表中更新，否则就会导致数据不一致的问题。`


### 3、4.说说分库与分表的设计

分库分表方案，分库分表中间件，分库分表可能遇到的问题

**「分库分表方案:」**

**1、** 水平分库：以字段为依据，按照一定策略（hash、range等），将一个库中的数据拆分到多个库中。

**2、** 水平分表：以字段为依据，按照一定策略（hash、range等），将一个表中的数据拆分到多个表中。

**3、** 垂直分库：以表为依据，按照业务归属不同，将不同的表拆分到不同的库中。

**4、** 垂直分表：以字段为依据，按照字段的活跃性，将表中字段拆到不同的表（主表和扩展表）中。

**「常用的分库分表中间件：」**

**1、** sharding-jdbc（当当）

**2、** Mycat

**3、** TDDL（淘宝）

**4、** Oceanus(58同城数据库中间件)

**5、** vitess（谷歌开发的数据库中间件）

**6、** Atlas(Qihoo 360)

**「分库分表可能遇到的问题」**

**1、** 事务问题：需要用分布式事务啦

**2、** 跨节点Join的问题：解决这一问题可以分两次查询实现

**3、** 跨节点的count,order by,group by以及聚合函数问题：分别在各个节点上得到结果后在应用程序端进行合并。

**4、** 数据迁移，容量规划，扩容等问题

**5、** ID问题：数据库被切分后，不能再依赖数据库自身的主键生成机制啦，最简单可以考虑UUID

**6、** 跨分片的排序分页问题（后台加大pagesize处理？）


### 4、索引的分类?

**1、** 从存储结构上来划分：BTree索引（B-Tree或B+Tree索引），Hash索引，full-index全文索引，R-Tree索引。这里所描述的是索引存储时保存的形式，

**2、** 从应用层次来分：普通索引，唯一索引，复合索引

**3、** 根据中数据的物理顺序与键值的逻辑（索引）顺序关系：聚集索引，非聚集索引。

平时讲的索引类型一般是指在应用层次的划分。

就像手机分类：安卓手机，IOS手机 与 华为手机，苹果手机，OPPO手机一样。

普通索引：

即一个索引只包含单个列，一个表可以有多个单列索引

唯一索引：

索引列的值必须唯一，但允许有空值

复合索引：

多列值组成一个索引，专门用于组合搜索，其效率大于索引合并

聚簇索引(聚集索引)：

并不是一种单独的索引类型，而是一种数据存储方式。具体细节取决于不同的实现，InnoDB的聚簇索引其实就是在同一个结构中保存了B-Tree索引(技术上来说是B+Tree)和数据行。

非聚簇索引：不是聚簇索引，就是非聚簇索引


### 5、MySQL数据库作发布系统的存储，一天五万条以上的增量，预计运维三年,怎么优化？

a、设计良好的数据库结构，允许部分数据冗余，尽量避免join查询，提高效率。

b、选择合适的表字段数据类型和存储引擎，适当的添加索引。

c、MySQL库主从读写分离。

d、找规律分表，减少单表中的数据量提高查询速度。

e。添加缓存机制，比如Memcached，apc等。

f、不经常改动的页面，生成静态页面。

g、书写高效率的SQL。比如 SELECT * FROM TABEL 改为 SELECT field_1, field_2, field_3 FROM TABLE.


### 6、百万级别或以上的数据，你是如何删除的？

**1、** 我们想要删除百万数据的时候可以先删除索引

**2、** 然后批量删除其中无用数据

**3、** 删除完成后重新创建索引。


### 7、drop、delete与truncate的区别
|  | delete | truncate | drop |
| --- | --- | --- | --- |
| 类型 | DML | DDL | DDL |
| 回滚 | 可回滚 | 不可回滚 | 不可回滚 |
| 删除内容 | 表结构还在，删除表的全部或者一部分数据行 | 表结构还在，删除表中的所有数据 | 从数据库中删除表，所有的数据行，索引和权限也会被删除 |
| 删除速度 | 删除速度慢，逐行删除 | 删除速度快 | 删除速度最快 |



### 8、数据库的乐观锁和悲观锁。

**悲观锁：**

悲观锁她专一且缺乏安全感了，她的心只属于当前事务，每时每刻都担心着它心爱的数据可能被别的事务修改，所以一个事务拥有（获得）悲观锁后，其他任何事务都不能对数据进行修改啦，只能等待锁被释放才可以执行。


### 9、NULL是什么意思

NULL这个值表示UNKNOWN(未知):它不表示“”(空字符串)。对NULL这个值的任何比较都会生产一个NULL值。您不能把任何值与一个 NULL值进行比较，并在逻辑上希望获得一个答案。

使用IS  NULL来进行NULL判断


### 10、对MySQL的锁了解吗

当数据库有并发事务的时候，可能会产生数据的不一致，这时候需要一些机制来保证访问的次序，锁机制就是这样的一个机制。

就像酒店的房间，如果大家随意进出，就会出现多人抢夺同一个房间的情况，而在房间上装上锁，申请到钥匙的人才可以入住并且将房间锁起来，其他人只有等他使用完毕才可以再次使用。


### 11、B+树在满足聚簇索引和覆盖索引的时候不需要回表查询数据？
### 12、innoDB的B+Tree 存储整行数据和主键的值得区别？
### 13、MYSQL的主从延迟，你怎么解决？
### 14、试述视图的优点？
### 15、什么是索引？
### 16、简述有哪些索引和作用
### 17、什么叫视图？游标是什么？
### 18、MySQL的binlog有几种录入格式？分别有什么区别？
### 19、存储引擎选择
### 20、索引有哪些优缺点？
### 21、MySQL中DATETIME和TIMESTAMP的区别
### 22、索引分类？
### 23、主键使用自增ID还是UUID？
### 24、MYSQL数据库服务器性能分析的方法命令有哪些?
### 25、索引设计的原则？
### 26、MySQL自增主键用完了怎么办？
### 27、InnoDB引擎中的索引策略，了解过吗？
### 28、MyISAM表格将在哪里存储，并且还提供其存储格式？
### 29、超键、候选键、主键、外键分别是什么？
### 30、MySQL一条SQL加锁分析




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)


## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
