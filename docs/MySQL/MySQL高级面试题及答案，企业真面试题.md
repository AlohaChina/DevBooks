# MySQL高级面试题及答案，企业真面试题

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)



### 1、使用乐观锁

乐观锁思想就是，有线程过来，先放过去修改，如果看到别的线程没修改过，就可以修改成功，如果别的线程修改过，就修改失败或者重试。实现方式：乐观锁一般会使用版本号机制或CAS算法实现。


### 2、InnoDB存储引擎的锁的算法有三种

**1、** Record lock：单个行记录上的锁

**2、** Gap lock：间隙锁，锁定一个范围，不包括记录本身

**3、** Next-key lock：record+gap 锁定一个范围，包含记录本身

**相关知识点：**

**1、** innodb对于行的查询使用next-key lock

**2、** Next-locking keying为了解决Phantom Problem幻读问题

**3、** 当查询的索引含有唯一属性时，将next-key lock降级为record key

**4、** Gap锁设计的目的是为了阻止多个事务将记录插入到同一范围内，而这会导致幻读问题的产生

**5、** 有两种方式显式关闭gap锁：（除了外键约束和唯一性检查外，其余情况仅使用record lock） A、将事务隔离级别设置为RC B、将参数innodb_locks_unsafe_for_binlog设置为1


### 3、列设置为AUTO INCREMENT时，如果在表中达到最大值，会发生什么情况？

它会停止递增，任何进一步的插入都将产生错误，因为密钥已被使用。


### 4、日常工作中你是怎么优化SQL的？

**可以从这几个维度回答这个问题：**

**1、** 加索引

**2、** 避免返回不必要的数据

**3、** 适当分批量进行

**4、** 优化sql结构

**5、** 分库分表

**6、** 读写分离


### 5、按照锁的粒度分，数据库锁有哪些呢？锁机制与InnoDB锁算法

按锁粒度分有：表锁，页锁，行锁

按锁机制分有：乐观锁，悲观锁


### 6、CHAR和VARCHAR的区别？

**1、** CHAR和VARCHAR类型在存储和检索方面有所不同

**2、** CHAR列长度固定为创建表时声明的长度，长度值范围是1到255当CHAR值被存储时，它们被用空格填充到特定长度，检索CHAR值时需删除尾随空格。


### 7、前缀索引

**1、** 语法：`index(field(10))`，使用字段值的前10个字符建立索引，默认是使用字段的全部内容建立索引。

**2、** 前提：前缀的标识度高。比如密码就适合建立前缀索引，因为密码几乎各不相同。

**3、** 实操的难度：在于前缀截取的长度。

**4、** 我们可以利用`select count(*)/count(distinct left(password,prefixLen));`，通过从调整`prefixLen`的值（从1自增）查看不同前缀长度的一个平均匹配度，接近1时就可以了（表示一个密码的前`prefixLen`个字符几乎能确定唯一一条记录）


### 8、索引具体采用那种数据结构呢？

常见的MySQL主要有两种结构：hash索引和B+Tree索引，我们使用的是innodb引擎，默认的是B+树。


### 9、对于关系型数据库而言，索引是相当重要的概念，请回答有关索引的几个问题：

1.索引的目的是什么？

快速访问数据表中的特定信息，提高检索速度

创建唯一性索引，保证数据库表中每一行数据的唯一性。

加速表和表之间的连接

使用分组和排序子句进行数据检索时，可以显著减少查询中分组和排序的时间

2.索引对数据库系统的负面影响是什么？

负面影响：

创建索引和维护索引需要耗费时间，这个时间随着数据量的增加而增加；索引需要占用物理空间，不光是表需要占用数据空间，每个索引也需要占用物理空间；当对表进行增、删、改、的时候索引也要动态维护，这样就降低了数据的维护速度。

3.为数据表建立索引的原则有哪些？

在最频繁使用的、用以缩小查询范围的字段上建立索引。

在频繁使用的、需要排序的字段上建立索引

4.什么情况下不宜建立索引？

对于查询中很少涉及的列或者重复值比较多的列，不宜建立索引。

对于一些特殊的数据类型，不宜建立索引，比如文本字段（text）等


### 10、主从同步延迟的原因

一个服务器开放Ｎ个链接给客户端来连接的，这样有会有大并发的更新操作, 但是从服务器的里面读取binlog的线程仅有一个，当某个SQL在从服务器上执行的时间稍长 或者由于某个SQL要进行锁表就会导致，主服务器的SQL大量积压，未被同步到从服务器里。这就导致了主从不一致， 也就是主从延迟。


### 11、NULL是什么意思
### 12、B树和B+树的区别，数据库为什么使用B+树而不是B树？
### 13、MySQL有哪些数据类型
### 14、优化器的执行过程？
### 15、NOW（）和CURRENT_DATE（）有什么区别？
### 16、视图的优点，缺点，讲一下？
### 17、超大分页怎么处理？
### 18、一个6亿的表a，一个3亿的表b，通过外间tid关联，你如何最快的查询出满足条件的第50000到第50200中的这200条数据记录。
### 19、什么是最左前缀原则？什么是最左匹配原则
### 20、优化子查询
### 21、什么是死锁？怎么解决？
### 22、创建索引有什么原则呢？
### 23、视图的缺点
### 24、字段为什么要求定义为not null？
### 25、数据库的乐观锁和悲观锁。
### 26、列值为NULL时，查询是否会用到索引？
### 27、简单描述MySQL中，索引，主键，唯一索引，联合索引的区别，对数据库的性能有什么影响（从读写两方面）
### 28、如果一个表有一列定义为TIMESTAMP，将发生什么？
### 29、最左匹配原则？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)


## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
