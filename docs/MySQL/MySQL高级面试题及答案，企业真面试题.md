# MySQL高级面试题及答案，企业真面试题

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://github.com/souyunku/DevBooks/blob/master/docs/index.md)



### 1、MySQL数据库cpu飙升的话，要怎么处理呢？

**「排查过程：」**

使用top 命令观察，确定是MySQLd导致还是其他原因。

如果是MySQLd导致的，show processlist，查看session情况，确定是不是有消耗资源的sql在运行。

找出消耗高的 sql，看看执行计划是否准确， 索引是否缺失，数据量是否太大。

**「处理：」**

kill 掉这些线程(同时观察 cpu 使用率是否下降)，

进行相应的调整(比如说加索引、改 sql、改内存参数)

重新跑这些 SQL。

**「其他情况：」**

也有可能是每个 sql 消耗资源并不多，但是突然之间，有大量的 session 连进来导致 cpu 飙升，这种情况就需要跟应用一起来分析为何连接数会激增，再做出相应的调整，比如说限制连接数等


### 2、日志的存放形式

redo：在页修改的时候，先写到 redo log buffer 里面， 然后写到 redo log 的文件系统缓存里面(fwrite)，然后再同步到磁盘文件（ fsync）。

Undo：在 MySQL5.5 之前， undo 只能存放在 ibdata文件里面， 5.6 之后，可以通过设置 innodb_undo_tablespaces 参数把 undo log 存放在 ibdata之外。


### 3、你是否做过主从一致性校验，如果有，怎么做的，如果没有，你打算怎么做？

主从一致性校验有多种工具 例如checksum、MySQLdiff、pt-table-checksum等


### 4、存储引擎分类有哪些以及使用场景？

**存储引擎主要有**

**1、** MyIsam

**2、** InnoDB

**3、** Memory

**4、** Archive

**5、** Federated

默认为:InnoDB 引擎。InnoDB 底层存储结构为 B+树， B 树的每个节点对应 innodb

的一个 page，page 大小是固定的，一般设为 16k

**使用场景**

**1、** 经常更新的表，适合处理多重并发的更新请求

**2、** 支持事务。

**3、** 可以从灾难中恢复(通过 bin-log 日志等)

**4、** 外键约束。只有他支持外键。

**5、** 支持自动增加列属性 auto_increment


### 5、MyISAM表格将在哪里存储，并且还提供其存储格式？

**每个MyISAM表格以三种格式存储在磁盘上：**

**1、** ·“.frm”文件存储表定义

**2、** ·数据文件具有“.MYD”（MYData）扩展名

**3、** 索引文件具有“.MYI”（MYIndex）扩展名


### 6、索引的分类?

**1、** 从存储结构上来划分：BTree索引（B-Tree或B+Tree索引），Hash索引，full-index全文索引，R-Tree索引。这里所描述的是索引存储时保存的形式，

**2、** 从应用层次来分：普通索引，唯一索引，复合索引

**3、** 根据中数据的物理顺序与键值的逻辑（索引）顺序关系：聚集索引，非聚集索引。

平时讲的索引类型一般是指在应用层次的划分。

就像手机分类：安卓手机，IOS手机 与 华为手机，苹果手机，OPPO手机一样。

普通索引：

即一个索引只包含单个列，一个表可以有多个单列索引

唯一索引：

索引列的值必须唯一，但允许有空值

复合索引：

多列值组成一个索引，专门用于组合搜索，其效率大于索引合并

聚簇索引(聚集索引)：

并不是一种单独的索引类型，而是一种数据存储方式。具体细节取决于不同的实现，InnoDB的聚簇索引其实就是在同一个结构中保存了B-Tree索引(技术上来说是B+Tree)和数据行。

非聚簇索引：不是聚簇索引，就是非聚簇索引


### 7、什么是数据库连接池?为什么需要数据库连接池呢?

**连接池基本原理：**

数据库连接池原理：在内部对象池中，维护一定数量的数据库连接，并对外暴露数据库连接的获取和返回方法。

**应用程序和数据库建立连接的过程：**

**1、** 通过TCP协议的三次握手和数据库服务器建立连接

**2、** 发送数据库用户账号密码，等待数据库验证用户身份

**3、** 完成身份验证后，系统可以提交SQL语句到数据库执行

**4、** 把连接关闭，TCP四次挥手告别。

**数据库连接池好处：**

**1、** 资源重用 (连接复用)

**2、** 更快的系统响应速度

**3、** 新的资源分配手段

**4、** 统一的连接管理，避免数据库连接泄漏


### 8、什么情况下设置了索引但无法使用

1.以“%”开头的LIKE语句，模糊匹配

2\、OR语句前后没有同时使用索引

3\、数据类型出现隐式转化（如varchar不加单引号的话可能会自动转换为int型）


### 9、超键、候选键、主键、外键分别是什么？

**1、** 超键：在关系模式中，能唯一知标识元组的属性集称为超键。

**2、** 候选键：是最小超键，即没有冗余元素的超键。

**3、** 主键：数据库表中对储存数据对象予以唯一和完整标识的数据列或属性的组合。一个数据列只能有一个主键，且主键的取值不能缺失，即不能为空值（Null）。

**4、** 外键：在一个表中存在的另一个表的主键称此表的外键。。


### 10、一条SQL语句在MySQL中如何执行的？

先看一下MySQL的逻辑架构图吧~

**「查询语句：」**

**1、** 先检查该语句是否有权限

**2、** 如果没有权限，直接返回错误信息

**3、** 如果有权限，在 MySQL8.0 版本以前，会先查询缓存。

**4、** 如果没有缓存，分析器进行词法分析，提取 sql 语句select等的关键元素。然后判断sql 语句是否有语法错误，比如关键词是否正确等等。

**5、** 优化器进行确定执行方案

**6、** 进行权限校验，如果没有权限就直接返回错误信息，如果有权限就会调用数据库引擎接口，返回执行结果。


### 11、什么是存储过程？用什么来调用？
### 12、SQL语言包括哪几部分？每部分都有哪些操作关键字？
### 13、组合索引是什么？为什么需要注意组合索引中的顺序？
### 14、如何显示前50行？
### 15、视图的使用场景有哪些？
### 16、MySQL中InnoDB支持的四种事务隔离级别名称，以及逐级之间的区别？
### 17、锁的优化策略
### 18、innoDB的B+Tree 存储整行数据和主键的值得区别？
### 19、什么是子查询
### 20、说一下数据库的三大范式
### 21、MySQL数据库作发布系统的存储，一天五万条以上的增量，预计运维三年,怎么优化？
### 22、创建索引的三种方式
### 23、MySQL有关权限的表有哪几个呢？
### 24、Innodb的事务与日志的实现方式
### 25、MySQL中DATETIME和TIMESTAMP的区别
### 26、对于关系型数据库而言，索引是相当重要的概念，请回答有关索引的几个问题：
### 27、怎么优化SQL查询语句吗
### 28、UNION与UNION ALL的区别？
### 29、MySQL中InnoDB支持的四种事务隔离级别名称，以及逐级之间的区别？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
