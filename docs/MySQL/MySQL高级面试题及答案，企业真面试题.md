# MySQL高级面试题及答案，企业真面试题

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://github.com/souyunku/DevBooks/blob/master/docs/index.md)



### 1、为什么要优化

**1、** 系统的吞吐量瓶颈往往出现在数据库的访问速度上

**2、** 随着应用程序的运行，数据库的中的数据会越来越多，处理时间会相应变慢

**3、** 数据是存放在磁盘上的，读写速度无法和内存相比

优化原则：减少系统瓶颈，减少资源占用，增加系统的反应速度


### 2、优化特定类型的查询语句

**1、** count(*)会忽略所有的列，直接统计所有列数，不要使用count(列名)

**2、** MyISAM中，没有任何where条件的count(*)非常快。

**3、** 当有where条件时，MyISAM的count统计不一定比其它引擎快。

**4、** 可以使用explain查询近似值，用近似值替代count(*)

**5、** 增加汇总表

**6、** 使用缓存


### 3、慢查询日志

**用于记录执行时间超过某个临界值的SQL日志，用于快速定位慢查询，为我们的优化做参考**

**1、** 开启慢查询日志

**2、** 配置项：`slow_query_log`

**3、** 可以使用`show variables like ‘slov_query_log’`查看是否开启，如果状态值为`OFF`，可以使用`set GLOBAL slow_query_log = on`来开启，它会在`datadir`下产生一个`xxx-slow.log`的文件。

**4、** 设置临界时间

**5、** 配置项：`long_query_time`

**6、** 查看：`show VARIABLES like 'long_query_time'`，单位秒

**7、** 设置：`set long_query_time=0.5`

**8、** 实操时应该从长时间设置到短的时间，即将最慢的SQL优化掉

**9、** 查看日志，一旦SQL超过了我们设置的临界时间就会被记录到`xxx-slow.log`中


### 4、数据库自增主键可能遇到什么问题。

**1、** 使用自增主键对数据库做分库分表，可能出现诸如主键重复等的问题。解决方案的话，简单点的话可以考虑使用UUID哈

**2、** 自增主键会产生表锁，从而引发问题

**3、** 自增主键可能用完问题。


### 5、InnoDB引擎中的索引策略，了解过吗？

**1、** 覆盖索引

**2、** 最左前缀原则

**3、** 索引下推

索引下推优化是 MySQL 5.6 引入的， 可以在索引遍历过程中，对索引中包含的字段先做判断，直接过滤掉不满足条件的记录，减少回表次数。


### 6、主从同步延迟的解决办法

**1、** 主服务器要负责更新操作，对安全性的要求比从服务器要高，所以有些设置参数可以修改，比如sync_binlog=1，innodb_flush_log_at_trx_commit = 1 之类的设置等。

**2、** 选择更好的硬件设备作为slave。

**3、** 把一台从服务器当度作为备份使用， 而不提供查询， 那边他的负载下来了， 执行relay log 里面的SQL效率自然就高了。

**4、** 增加从服务器喽，这个目的还是分散读的压力，从而降低服务器负载。


### 7、说出一些数据库优化方面的经验?

**1、** 有外键约束的话会影响增删改的性能，如果应用程序可以保证数据库的完整性那就去除外键

**2、** Sql语句全部大写，特别是列名大写，因为数据库的机制是这样的，sql语句发送到数据库服务器，数据库首先就会把sql编译成大写在执行，如果一开始就编译成大写就不需要了把sql编译成大写这个步骤了

**3、** 如果应用程序可以保证数据库的完整性，可以不需要按照三大范式来设计数据库

**4、** 其实可以不必要创建很多索引，索引可以加快查询速度，但是索引会消耗磁盘空间

**5、** 如果是jdbc的话，使用PreparedStatement不使用Statement，来创建SQl，PreparedStatement的性能比Statement的速度要快，使用PreparedStatement对象SQL语句会预编译在此对象中，PreparedStatement对象可以多次高效的执行


### 8、数据库自增主键可能遇到什么问题。
### 9、优化UNION查询
### 10、NULL是什么意思
### 11、索引的底层实现原理和优化
### 12、读写分离常见方案？
### 13、索引有哪些优缺点？
### 14、一条Sql的执行顺序？
### 15、什么是幻读，脏读，不可重复读呢？
### 16、如何删除索引
### 17、SQL的生命周期？
### 18、聚集索引与非聚集索引的区别
### 19、500台db，在最快时间之内重启。
### 20、数据库中间件了解过吗，sharding jdbc，mycat？
### 21、linux添加索引
### 22、索引有哪几种类型？
### 23、MySQL 索引使用有哪些注意事项呢？
### 24、如果一个表有一列定义为TIMESTAMP，将发生什么？
### 25、索引哪些情况会失效
### 26、数据库的乐观锁和悲观锁。
### 27、什么是事务的隔离级别？MySQL的默认隔离级别是什么？
### 28、MySQL 的内连接、左连接、右连接有什么区别？
### 29、Innodb的事务与日志的实现方式




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
