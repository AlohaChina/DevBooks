# MySQL高级面试题整理及答案

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)



### 1、一条SQL语句在MySQL中如何执行的？

先看一下MySQL的逻辑架构图吧~

**「查询语句：」**

**1、** 先检查该语句是否有权限

**2、** 如果没有权限，直接返回错误信息

**3、** 如果有权限，在 MySQL8.0 版本以前，会先查询缓存。

**4、** 如果没有缓存，分析器进行词法分析，提取 sql 语句select等的关键元素。然后判断sql 语句是否有语法错误，比如关键词是否正确等等。

**5、** 优化器进行确定执行方案

**6、** 进行权限校验，如果没有权限就直接返回错误信息，如果有权限就会调用数据库引擎接口，返回执行结果。


### 2、什么是存储过程？有哪些优缺点？

「存储过程」，就是一些编译好了的SQL语句，这些SQL语句代码像一个方法一样实现一些功能（对单表或多表的增删改查），然后给这些代码块取一个名字，在用到这个功能的时候调用即可。

**「优点：」**

**1、** 存储过程是一个预编译的代码块，执行效率比较高

**2、** 存储过程在服务器端运行，减少客户端的压力

**3、** 允许模块化程序设计，只需要创建一次过程，以后在程序中就可以调用该过程任意次，类似方法的复用

**4、** 一个存储过程替代大量T_SQL语句 ，可以降低网络通信量，提高通信速率

**5、** 可以一定程度上确保数据安全

**「缺点：」**

**1、** 调试麻烦

**2、** 可移植性不灵活

**3、** 重新编译问题



### 3、怎样才能找出最后一次插入时分配了哪个自动增量？

LAST_INSERT_ID将返回由Auto_increment分配的最后一个值，并且不需要指定表名称。


### 4、什么是索引？

**1、** 索引是一种特殊的文件(InnoDB数据表上的索引是表空间的一个组成部分)，它们包含着对数据表里所有记录的引用指针。

**2、** 索引是一种数据结构。数据库索引，是数据库管理系统中一个排序的数据结构，以协助快速查询、更新数据库表中数据。索引的实现通常使用B树及其变种B+树。

**3、** 更通俗的说，索引就相当于目录。为了方便查找书中的内容，通过对内容建立索引形成目录。索引是一个文件，它是要占据物理空间的。


### 5、FLOAT和DOUBLE的区别是什么？

**1、** FLOAT类型数据可以存储至多8位十进制数，并在内存中占4字节。

**2、** DOUBLE类型数据可以存储至多18位十进制数，并在内存中占8字节。


### 6、MyISAM索引与InnoDB索引的区别？

**1、** InnoDB索引是聚簇索引，MyISAM索引是非聚簇索引。

**2、** InnoDB的主键索引的叶子节点存储着行数据，因此主键索引非常高效。

**3、** MyISAM索引的叶子节点存储的是行数据地址，需要再寻址一次才能得到数据。

**4、** InnoDB非主键索引的叶子节点存储的是主键和其他带索引的列数据，因此查询时做到覆盖索引会非常高效。


### 7、MySQL数据库作发布系统的存储，一天五万条以上的增量，预计运维三年,怎么优化？

**1、** 设计良好的数据库结构，允许部分数据冗余，尽量避免join查询，提高效率。

**2、** 选择合适的表字段数据类型和存储引擎，适当的添加索引。

**3、** MySQL库主从读写分离。

**4、** 找规律分表，减少单表中的数据量提高查询速度。

**5、** 添加缓存机制，比如Memcached，apc等。

**6、** 不经常改动的页面，生成静态页面。

**7、** 书写高效率的SQL。比如 SELECT * FROM TABEL 改为 SELECT field_1, field_2, field_3 FROM TABLE.


### 8、什么是数据库事务？

数据库事务（简称：事务），是数据库管理系统执行过程中的一个逻辑单位，由一个有限的数据库操作序列构成，这些操作要么全部执行,要么全部不执行，是一个不可分割的工作单位。


### 9、如何写sql能够有效的使用到复合索引。

复合索引，也叫组合索引，用户可以在多个列上建立索引,这种索引叫做复合索引。

当我们创建一个组合索引的时候，如(k1,k2,k3)，相当于创建了（k1）、(k1,k2)和(k1,k2,k3)三个索引，这就是最左匹配原则。

```
select * from table where k1=A AND k2=B AND k3=D
```

有关于复合索引，我们需要关注查询Sql条件的顺序，确保最左匹配原则有效，同时可以删除不必要的冗余索引。


### 10、数据库中的事务是什么?

事务（transaction）是作为一个单元的一组有序的数据库操作。如果组中的所有操作都成功，则认为事务成功，即使只有一个操作失败，事务也不成功。如果所有操作完成，事务则提交，其修改将作用于所有其他数据库进程。如果一个操作失败，则事务将回滚，该事务所有操作的影响都将取消。

**事务特性：**

**1、** 原子性：即不可分割性，事务要么全部被执行，要么就全部不被执行。

**2、** 一致性或可串性。事务的执行使得数据库从一种正确状态转换成另一种正确状态

**3、** 隔离性。在事务正确提交之前，不允许把该事务对数据的任何改变提供给任何其他事务，

**4、** 持久性。事务正确提交后，其结果将永久保存在数据库中，即使在事务提交后有了其他故障，事务的处理结果也会得到保存。

**或者这样理解：**

事务就是被绑定在一起作为一个逻辑工作单元的SQL语句分组，如果任何一个语句操作失败那么整个操作就被失败，以后操作就会回滚到操作前状态，或者是上有个节点。为了确保要么执行，要么不执行，就可以使用事务。要将有组语句作为事务考虑，就需要通过ACID测试，即原子性，一致性，隔离性和持久性。


### 11、B树和B+树的区别，数据库为什么使用B+树而不是B树？
### 12、B+Tree的页子节点都可以存放哪些东西？
### 13、字段为什么要求定义为not null？
### 14、使用悲观锁
### 15、六种关联查询
### 16、按照锁的粒度分，数据库锁有哪些呢？锁机制与InnoDB锁算法
### 17、你们数据库是否支持emoji表情存储，如果不支持，如何操作？
### 18、说一下大表查询的优化方案
### 19、什么是索引？
### 20、什么是事务的隔离级别？MySQL的默认隔离级别是什么？
### 21、超大分页怎么处理？
### 22、谈谈六种关联查询，使用场景。
### 23、什么是最左前缀原则？什么是最左匹配原则？
### 24、数据库存储日期格式时，如何考虑时区转换问题？
### 25、数据库中间件了解过吗，sharding jdbc，mycat？
### 26、说说MySQL 的基础架构图
### 27、在高并发情况下，如何做到安全的修改同一行数据？
### 28、如何显示前50行？
### 29、为什么要优化




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)


## 其他，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "大厂面试题")](https://souyunku.lanzous.com/b0alp9b9g "大厂面试题")

## 关注公众号：架构师专栏，回复：“面试题”，即可

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/jiagoushi.png "架构师专栏")](https://souyunku.lanzous.com/b0alp9b9g "架构师专栏")

## 关注公众号：架构师专栏，回复：“面试题”，即可
