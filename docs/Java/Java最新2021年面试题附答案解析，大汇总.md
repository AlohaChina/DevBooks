# Java最新2021年面试题附答案解析，大汇总

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://github.com/souyunku/DevBooks/blob/master/docs/index.md)



### 1、简述synchronized 和java.util.concurrent.locks.Lock的异同？



Lock是Java 5以后引入的新的API，和关键字synchronized相比主要相同点：Lock 能完成synchronized所实现的所有功能；主要不同点：Lock有比synchronized更精确的线程语义和更好的性能，而且不强制性的要求一定要获得锁。synchronized会自动释放锁，而Lock一定要求程序员手工释放，并且最好在finally 块中释放（这是释放外部资源的最好的地方）。


### 2、使用集合框架的好处

**1、** 容量自增长；

**2、** 提供了高性能的数据结构和算法，使编码更轻松，提高了程序速度和质量；

**3、** 可以方便地扩展或改写集合，提高代码复用性和可操作性。

**4、** 通过使用JDK自带的集合类，可以降低代码维护和学习新API成本。


### 3、为什么需要双亲委派模式？

在这里，先想一下，如果没有双亲委派，那么用户是不是可以自己定义一个java.lang.Object的同名类，java.lang.String的同名类，并把它放到ClassPath中,那么类之间的比较结果及类的唯一性将无法保证，因此，为什么需要双亲委派模型？防止内存中出现多份同样的字节码。


### 4、线上常用的 JVM 参数有哪些？

**数据区设置**

**1、** Xms：初始堆大小

**2、** Xmx：最大堆大小

**3、** Xss:Java 每个线程的Stack大小

**4、** XX:NewSize=n：设置年轻代大小

**5、** XX:NewRatio=n：设置年轻代和年老代的比值。如：为 3，表示年轻代与年老代比值为 1:3，年轻代占整个年轻代年老代和的 1/4。

**6、** XX：SurvivorRatio=n：年轻代中 Eden 区与两个 Survivor 区的比值。注意 Survivor 区有两个。如：3，表示 Eden：Survivor=3：2，一个 Survivor 区占整个年轻代的 1/5。

**7、** XX：MaxPermSize=n：设置持久代大小。

**收集器设置**

**1、** XX:+UseSerialGC：设置串行收集器

**2、** XX:+UseParallelGC:：设置并行收集器

**3、** XX:+UseParalledlOldGC：设置并行年老代收集器

**4、** XX:+UseConcMarkSweepGC：设置并发收集器

**GC日志打印设置**

**1、** XX:+PrintGC：打印 GC 的简要信息

**2、** XX:+PrintGCDetails：打印 GC 详细信息

**3、** XX:+PrintGCTimeStamps：输出 GC 的时间戳


### 5、线程的调度策略

**线程调度器选择优先级最高的线程运行，但是，如果发生以下情况，就会终止线程的运行：**

**1、** 线程体中调用了yield方法让出了对cpu的占用权利

**2、** 线程体中调用了sleep方法使线程进入睡眠状态

**3、** 线程由于IO操作受到阻塞

**4、** 另外一个更高优先级线程出现

5）在支持时间片的系统中，该线程的时间片用完


### 6、类加载器双亲委派模型机制？

**基本定义：**

双亲委派模型的工作流程是：如果一个类加载器收到了类加载的请求，它首先不会自己去加载这个类，而是把请求委托给父加载器去完成，依次向上，因此，所有的类加载请求最终都应该被传递到顶层的启动类加载器中，只有当父加载器没有找到所需的类时，子加载器才会尝试去加载该类。

**双亲委派机制:**

**1、** 当 AppClassLoader 加载一个 class 时，它首先不会自己去尝试加载这个类，而是把类加载请求委派给父类加载器 ExtClassLoader 去完成。

**2、** 当 ExtClassLoader 加载一个 class 时，它首先也不会自己去尝试加载这个类，而是把类加载请求委派给 BootStrapClassLoader 去完成。

**3、** 如果 BootStrapClassLoader 加载失败，会使用 ExtClassLoader 来尝试加载；

**4、** 若 ExtClassLoader 也加载失败，则会使用 AppClassLoader 来加载，如果 AppClassLoader 也加载失败，则会报出异常 ClassNotFoundException。

**如下图所示：**

![](https://gitee.com/souyunkutech/souyunku-home/raw/master/images/souyunku-web/2020/5/2/05/34/39_4.png#alt=39%5C_4.png)

**双亲委派作用：**

**1、** 通过带有优先级的层级关可以避免类的重复加载；

**2、** 保证 Java 程序安全稳定运行，Java 核心 API 定义类型不会被随意替换。


### 7、生产环境用的什么JDK？如何配置的垃圾收集器？

**Oracle JDK 1.8**

JDK 1.8 中有 Serial、ParNew、Parallel Scavenge、Serial Old、Parallel Old、CMS、G1，默认使用 Parallel Scavenge + Parallel Old。

**1、** Serial 系列是单线程垃圾收集器，处理效率很高，适合小内存、客户端场景使用，使用参数 -XX:+UseSerialGC 显式启用。

**2、** Parallel 系列相当于并发版的 Serial，追求高吞吐量，适用于较大内存并且有多核CPU的环境，默认或显式使用参数 -XX:+UseParallelGC 启用。可以使用 -XX:MaxGCPauseMillis 参数指定最大垃圾收集暂停毫秒数，收集器会尽量达到目标；使用 -XX:GCTimeRatio 指定期望吞吐量大小，默认 99，用户代码运行时间:垃圾收集时间=99:1。

**3、** CMS，追求垃圾收集暂停时间尽可能短，适用于服务端较大内存且多 CPU 的应用，使用参数 -XX:+UseConcMarkSweepGC 显式开启，会同时作用年轻代与老年代，但有浮动垃圾和内存碎片化的问题。

**4、** G1，主要面向服务端应用的垃圾收集器，适用于具有大内存的多核 CPU 的服务器，追求较小的垃圾收集暂停时间和较高的吞吐量。首创局部内存回收设计思路，采用不同策略实现分代，不再使用固定大小、固定数量的堆内存分代区域划分，而是基于 Region 内存布局，优先回收价收益最大的 Region。使用参数 -XX:+UseG1GC 开启。

**我们生产环境使用了 G1 收集器，相关配置如下**

**1、** -Xmx12g

**2、** -Xms12g

**3、** -XX:+UseG1GC

**4、** -XX:InitiatingHeapOccupancyPercent=45

**5、** -XX:MaxGCPauseMillis=200

**6、** -XX:MetaspaceSize=256m

**7、** -XX:MaxMetaspaceSize=256m

**8、** -XX:MaxDirectMemorySize=512m

**9、** -XX:G1HeapRegionSize 未指定

**核心思路：**

**1、** 每个内存区域设置上限，避免溢出

**2、** 堆设置为操作系统的 70%左右，超过 8 G，首选 G1

**3、** 根据老年代对象提升速度，调整新生代与老年代之间的内存比例

**4、** 等过 GC 信息，针对项目敏感指标优化，比如访问延迟、吞吐量等


### 8、实现可见性的方法有哪些？
### 9、请解释一下什么时候可以使用“.”，什么时候可以使用“[]”?
### 10、Spring中Bean的作用域有哪些？
### 11、Java死锁以及如何避免？
### 12、创建对象的过程是什么？
### 13、Java中各种数据默认值
### 14、什么是IoC和DI？DI是如何实现的？
### 15、3*0.1 == 0.3 将会返回什么？true 还是 false？
### 16、如何停止一个正在运行的线程？
### 17、Java中如何实现多线程
### 18、Collections.synchronized  是什么？
### 19、Java 中，受检查异常 和 不受检查异常的区别？
### 20、判断两个对象是否相同，能使用equlas比较吗？
### 21、Java 面试中其他各式各样的问题
### 22、启动一个线程是调用run()还是start()方法？
### 23、在没有使用临时变量的情况如何交换两个整数变量的值？
### 24、代理的分类
### 25、GC的回收流程是怎样的？
### 26、JVM 的内存模型是什么？
### 27、如何进行单元测试
### 28、JIT 是什么？
### 29、面向对象和面向过程的区别
### 30、JVM 选项 -XX:+UseCompressedOops 有什么作用？为什么要使用？
### 31、分代收集算法
### 32、什么是Java Timer 类？如何创建一个有特定时间间隔的任务？
### 33、重排序遵守的规则
### 34、GC 垃圾收集器
### 35、生产环境服务器变慢，如何诊断处理？
### 36、如果父类只有有参构造方法，那么子类必须要重写父类的构造方法吗？
### 37、游标的创建步骤？
### 38、GC日志的real、user、sys是什么意思？
### 39、你对线程优先级的理解是什么？
### 40、XML文档定义有几种形式？它们之间有何本质区别？解析XML文档有哪几种方式？
### 41、构造器注入和 setter 依赖注入，那种方式更好？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
