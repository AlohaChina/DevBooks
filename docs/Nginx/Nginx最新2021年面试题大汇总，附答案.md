# Nginx最新2021年面试题大汇总，附答案

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)



### 1、请列举 Nginx 服务器的最佳用途。Nginx 服务器的最佳用法是在网络上部署动态 HTTP 内容，使用 SCGI、WSGI 应

用程序服务器、用于脚本的 FastCGI 处理程序。它还可以作为负载均衡器。


### 2、Nginx负载均衡的算法怎么实现的?策略有哪些?

为了避免服务器崩溃，大家会通过负载均衡的方式来分担服务器压力。将对台服务器组成一个集群，当用户访问时，先访问到一个转发服务器，再由转发服务器将访问分发到压力更小的服务器。

Nginx负载均衡实现的策略有以下五种：


### 3、使用“反向代理服务器”的优点是什么？

反向代理服务器可以隐藏源服务器的存在和特征。它充当互联网云和 Web 服务器之间的中间层。这对于安全方面来说是很好的，特别是当我们使用 Web 托管服务时。

**这里，先不考虑负载均衡。**

**什么是正向代理？**

一个位于客户端和原始服务器(origin server)之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。

**1、** 客户端才能使用正向代理。

**2、** 正向代理总结就一句话：代理端代理的是客户端。例如说：? 我们使用的翻墙软件，OpenVPN 等等。

**什么是反向代理？**

反向代理（Reverse Proxy）方式，是指以代理服务器来接受 Internet上的连接请求，然后将请求，发给内部网络上的服务器并将从服务器上得到的结果返回给 Internet 上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。

**反向代理总结就一句话：代理端代理的是服务端。**

**请列举 Nginx 和 Apache 之间的不同点？**

**1、** 轻量级，同样起 web 服务，Nginx 比 Apache 占用更少的内存及资源。

**2、** 抗并发，Nginx 处理请求是异步非阻塞的，而 Apache 则是阻塞型的，在高并发下 Nginx 能保持低资源低消耗高性能。

**3、** 最核心的区别在于 Apache 是同步多进程模型，一个连接对应一个进程；Nginx 是异步的，多个连接（万级别）可以对应一个进程。

**4、** Nginx 高度模块化的设计，编写模块相对简单。

**LVS、Nginx、HAproxy 有什么区别？**

**1、** LVS ：是基于四层的转发。

**2、** HAproxy ： 是基于四层和七层的转发，是专业的代理服务器。

**3、** Nginx ：是 WEB 服务器，缓存服务器，又是反向代理服务器，可以做七层的转发。

Nginx 引入 [TCP 插件][TCP]之后，也可以支持四层的转发。

**区别**

LVS 由于是基于四层的转发所以只能做端口的转发，而基于 URL 的、基于目录的这种转发 LVS 就做不了。

**工作选择：**

HAproxy 和 Nginx 由于可以做七层的转发，所以 URL 和目录的转发都可以做，在很大并发量的时候我们就要选择 LVS ，像中小型公司的话并发量没那么大选择 HAproxy 或者 Nginx 足已。

由于 HAproxy 由是专业的代理服务器配置简单，所以中小型企业推荐使用HAproxy 。

**1、** 有些使用，使用 HAproxy 还是 Nginx ，也和公司运维对哪个技术栈的掌控程度。掌控 OK ，选择 Nginx 会更加不错。

**2、** 另外，LVS + Nginx 和 LVS + HAProxy 也是比较常见的选型组合。

**Squid、Varinsh、Nginx 有什么区别？**

三者都实现缓存服务器的作用。所以，本问题所有的视角，都是在作为缓存服务器下来聊。

**1、** Nginx本来是反向代理/web服务器，用了插件可以做做这个副业(缓存服务器)。

**2、** 但是本身不支持特性挺多，只能缓存静态文件。

**3、** 从这些功能上，Varinsh 和 Squid 是专业的 Cache 服务，而Nginx 这些是第三方模块完成。

**4、** Varnish 本身的技术上优势要高于 Squid ，它采用了可视化页面缓存技术。

**5、** 在内存的利用上，Varnis h比 Squid 具有优势，性能要比 Squid 高。

**6、** 还有强大的通过 Varnish 管理端口，可以使用正则表达式快速、批量地清除部分缓存

**7、** Varnish 是内存缓存，速度一流，但是内存缓存也限制了其容量，缓存页面和图片一般是挺好的。

**8、** Squid 的优势在于完整的庞大的 cache 技术资料，和很多的应用生产环境。

**工作选择：**

要做 cache 服务的话，我们肯定是要选择专业的 cache 服务，优先选择Squid 或者 Varnish 。


### 4、什么是正向代理和反向代理？

**1、** 正向代理就是一个人发送一个请求直接就到达了目标的服务器

**2、** 反方代理就是请求统一被Nginx接收，nginx反向代理服务器接收到之后，按照一定的规 则分发给了后端的业务处理服务器进行处理了


### 5、Nginx 有哪些优点？

**1、** 跨平台、配置简单。

**2、** 非阻塞、高并发连接

**3、** 处理 2-3 万并发连接数，官方监测能支持 5 万并发。

**4、** 内存消耗小

**5、** 开启 10 个 Nginx 才占 150M 内存。

**6、** 成本低廉，且开源。

**7、** 稳定性高，宕机的概率非常小。


### 6、Nginx服务器上的Master和Worker进程分别是什么?

Master进程：读取及评估配置和维持 ；Worker进程：处理请求。


### 7、正常限制访问频率（正常流量）

**1、** 限制一个用户发送的请求，我Nginx多久接收一个请求。

**2、** Nginx中使用ngx_http_limit_req_module模块来限制的访问频率，限制的原理实质是基于漏桶算法原理来实现的。在nginx.conf配置文件中可以使用limit_req_zone命令及limit_req命令限制单个IP的请求处理频率。

```
#定义限流维度，一个用户一分钟一个请求进来，多余的全部漏掉
limit_req_zone $binary_remote_addr zone = one: 10m rate = 1r / m;#绑定限流维度
server {
    location / seckill.html {
        limit_req zone = zone;
        proxy_pass http: //lj_seckill;
    }
}
```

1r/s代表1秒一个请求，1r/m一分钟接收一个请求， 如果Nginx这时还有别人的请求没有处理完，Nginx就会拒绝处理该用户请求。


### 8、突发限制访问频率（突发流量）

**1、** 限制一个用户发送的请求，我Nginx多久接收一个。

**2、** 上面的配置一定程度可以限制访问频率，但是也存在着一个问题：如果突发流量超出请求被拒绝处理，无法处理活动时候的突发流量，这时候应该如何进一步处理呢？Nginx提供burst参数结合nodelay参数可以解决流量突发的问题，可以设置能处理的超过设置的请求数外能额外处理的请求数。我们可以将之前的例子添加burst参数以及nodelay参数：

```
#定义限流维度，一个用户一分钟一个请求进来，多余的全部漏掉
limit_req_zone $binary_remote_addr zone=one:10m rate=1r/m;

#绑定限流维度
server{

    location/seckill.html{
        limit_req zone=zone burst=5 nodelay;
        proxy_pass http://lj_seckill;
    }
}
```

为什么就多了一个 burst=5 nodelay; 呢，多了这个可以代表Nginx对于一个用户的请求会立即处理前五个，多余的就慢慢来落，没有其他用户的请求我就处理你的，有其他的请求的话我Nginx就漏掉不接受你的请求


### 9、请解释 Nginx 如何处理 HTTP 请求？

**1、** 首先，Nginx 在启动时，会解析配置文件，得到需要监听的端口与 IP 地址，然后在 Nginx 的 Master 进程里面先初始化好这个监控的Socket(创建 S ocket，设置 addr、reuse 等选项，绑定到指定的 ip 地址端口，再 listen 监听)。

**2、** 然后，再 fork(一个现有进程可以调用 fork 函数创建一个新进程。由 fork 创建的新进程被称为子进程 )出多个子进程出来。

**3、** 之后，子进程会竞争 accept 新的连接。此时，客户端就可以向 nginx 发起连接了。当客户端与nginx进行三次握手，与 nginx 建立好一个连接后。此时，某一个子进程会 accept 成功，得到这个建立好的连接的 Socket ，然后创建 nginx 对连接的封装，即 ngx_connection_t 结构体。

**4、** 接着，设置读写事件处理函数，并添加读写事件来与客户端进行数据的交换。


### 10、限制并发连接数

Nginx中的ngx_http_limit_conn_module模块提供了限制并发连接数的功能，可以使用limit_conn_zone指令以及limit_conn执行进行配置。接下来我们可以通过一个简单的例子来看下：

```
 http {

     limit_conn_zone $binary_remote_addr zone=myip:10m;
     limit_conn_zone $server_name zone=myServerName:10m;
 }

 server {

     location / {

         limit_conn myip 10;
         limit_conn myServerName 100;
         rewrite / http://www.lijie.net permanent;
     }
 }
```

上面配置了单个IP同时并发连接数最多只能10个连接，并且设置了整个虚拟服务器同时最大并发数最多只能100个链接。当然，只有当请求的header被服务器处理后，虚拟服务器的连接数才会计数。刚才有提到过Nginx是基于漏桶算法原理实现的，实际上限流一般都是基于漏桶算法和令牌桶算法实现的。接下来我们来看看两个算法的介绍：


### 11、Nginx 是如何实现高并发的？
### 12、Nginx 常用命令？
### 13、请解释 Nginx 服务器上的 Master 和 Worker 进程分别是什么?
### 14、什么是动态资源、静态资源分离？
### 15、为什么要用Nginx？
### 16、解释如何在`Nginx`服务器上添加模块?
### 17、为什么要做动、静分离？
### 18、fair(第三方插件)
### 19、Nginx怎么做的动静分离？
### 20、请解释一下什么是 Nginx?
### 21、基于虚拟主机配置域名
### 22、轮询(默认)
### 23、Nginx配置高可用性怎么配置？
### 24、用Nginx服务器解释-s的目的是什么?
### 25、location的语法能说出来吗？
### 26、什么是C10K问题?
### 27、用`Nginx`服务器解释`-s`的目的是什么?
### 28、nginx是如何实现高并发的？
### 29、基于端口的虚拟主机
### 30、限流怎么做的？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/?p=67)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/?p=67)


## 其他，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "大厂面试题")](https://souyunku.lanzous.com/b0alp9b9g "大厂面试题")

## 关注公众号：架构师专栏，回复：“面试题”，即可

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/jiagoushi.png "架构师专栏")](https://souyunku.lanzous.com/b0alp9b9g "架构师专栏")

## 关注公众号：架构师专栏，回复：“面试题”，即可
