# 并发编程最新面试题2021年，常见面试题及答案汇总

### 其实，博主还整理了，更多大厂面试题，直接下载吧

### 下载链接：[高清172份，累计 7701 页大厂面试题  PDF](https://github.com/souyunku/DevBooks/blob/master/docs/index.md)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png)



### 1、什么是可重入锁（ReentrantLock）？

举例来说明锁的可重入性

```
public class UnReentrant{
    Lock lock = new Lock();
    public void outer(){
        lock.lock();
        inner();
        lock.unlock();
    }
    public void inner(){
        lock.lock();
        //do something
        lock.unlock();
    }
}
```

outer中调用了inner，outer先锁住了lock，这样inner就不能再获取lock。其实调用outer的线程已经获取了lock锁，但是不能在inner中重复利用已经获取的锁资源，这种锁即称之为 不可重入可重入就意味着：线程可以进入任何一个它已经拥有的锁所同步着的代码块。

synchronized、ReentrantLock都是可重入的锁，可重入锁相对来说简化了并发编程的开发。


### 2、Java的双亲委托机制是什么？

它的意思是，除了顶层的启动类加载器以外，其余的类加载器，在加载之前，都会委派给它的父加载器进行加载。这样一层层向上传递，直到祖先们都无法胜任，它才会真正的加载。

Java默认是这种行为。当然Java中也有很多打破双亲行为的骚操作，比如SPI（JDBC驱动加载），OSGI等。


### 3、谈谈你知道的垃圾收集器

**Serial 特点：**

**1、** JDK 1.3 开始提供

**2、** 新生代收集器

**3、** 无线程交互开销，单线程收集效率最高

**4、** 进行垃圾收集时需要暂停用户线程

**5、** 适用于客户端，小内存堆的回收

**ParNew 特点：**

**1、** 是 Serial 收集器的多线程并行版

**2、** JDK 7 之前首选的新生代收集器

**3、** 第一款支持并发的收集器，首次实现垃圾收集线程与用户线程基本上同时工作

**4、** 除 Serial 外，只有它能与 CMS 配合

**Parallel Scavenge 特点：**

**1、** 新生代收集器

**2、** 标记-复制算法

**3、** 多线程并行收集器

**4、** 追求高吞吐量，即最小的垃圾收集时间

**5、** 可以配置最大停顿时间、垃圾收集时间占比

**6、** 支持开启垃圾收集自适应调节策略，追求适合的停顿时间或最大的吞吐量

**Serial Old 特点：**

与 Serial 类似，是 Serial 收集器的老年代版本

使用标记-整理算法

**Parallel Old 特点：**

**1、** JDK 6 开始提供

**2、** Parallel Scavenge 的老年代版

**3、** 支持多线程并发收集

**4、** 标记-整理算法

**5、** Parallel Scavenge + Parallel Old 是一个追求高吞吐量的组合

**CMS 特点：**

**1、** 标记-清除算法

**2、** 追求最短回收停顿时间

**3、** 多应用于关注响应时间的 B/S 架构的服务端

**4、** 并发收集、低停顿

**5、** 占用一部分线程资源，应用程序变慢，吞吐量下降

**6、** 无法处理浮动垃圾，可能导致 Full GC

**7、** 内存碎片化问题

**G1 特点：**

**1、** JDK 6 开始实验，JDK 7 商用

**2、** 面向服务端，JDK 9 取代 Parallel Scavenge + Parallel Old

**3、** 结合标记-整理、标记-复制算法

**4、** 首创局部内存回收设计思路

**5、** 基于 Region 内存布局，采用不同策略实现分代

**6、** 不再使用固定大小、固定数量的堆内存分代区域划分

**7、** 优先回收价收益最大的 Region

**8、** 单个或多个 Humongous 区域存放大对象

**9、** 使用记忆集解决跨 Region 引用问题

**10、** 复杂的卡表实现，导致更高的内存占用，堆的 10%～20%

**11、** 全功能垃圾收集器

**12、** 追求有限的时间内最高收集效率、延迟可控的情况下最高吞吐量

**13、** 追求应付内存分配速率，而非一次性清掉所有垃圾内存

**14、** 适用于大内存堆

**Shenandoah 特点：**

**1、** 追求低延迟，停顿 10 毫秒以内

**2、** OpenJDK 12 新特性，RedHat 提供

**3、** 连接矩阵代替记忆集，降低内存使用与伪共享问题出现概率

**ZGC 特点：**

**1、** JDK 11 新加的实验性质的收集器

**2、** 追求低延迟，停顿 10 毫秒以内

**3、** 基于 Region 内存布局

**4、** 未设分代

**5、** 读屏障、染色指针、内存多重映射实现可并发的标记-整理算法

**6、** 染色指针和内存多重映射设计精巧，解决部分性能问题，但降低了可用最大内存、操作系统受限、只支持 32 位、不支持压缩指针等

**7、** 成绩亮眼、性能彪悍


### 4、什么叫线程安全？servlet 是线程安全吗?

**1、** 线程安全是编程中的术语，指某个方法在多线程环境中被调用时，能够正确地处理多个线程之间的共享变量，使程序功能正确完成。

**2、** Servlet 不是线程安全的，servlet 是单实例多线程的，当多个线程同时访问同一个方法，是不能保证共享变量的线程安全性的。

**3、** Struts2 的 action 是多实例多线程的，是线程安全的，每个请求过来都会 new 一个新的 action 分配给这个请求，请求完成后销毁。

**4、** SpringMVC 的 Controller 是线程安全的吗？不是的，和 Servlet 类似的处理流程。

**5、** Struts2 好处是不用考虑线程安全问题；Servlet 和 SpringMVC 需要考虑线程安全问题，但是性能可以提升不用处理太多的 gc，可以使用 ThreadLocal 来处理多线程的问题。


### 5、怎么检测一个线程是否拥有锁？

在java.lang.Thread中有一个方法叫holdsLock()，它返回true如果当且仅当当前线程拥有某个具体对象的锁。


### 6、有哪些打破了双亲委托机制的案例？

**1、** Tomcat可以加载自己目录下的class文件，并不会传递给父类的加载器。

**2、** Java的SPI，发起者是 `BootstrapClassLoader`， `BootstrapClassLoader`已经是最上层的了。它直接获取了 `AppClassLoader`进行驱动加载，和双亲委派是相反的。。


### 7、线程与进程的区别？

进程是操作系统分配资源的最小单元，线程是操作系统调度的最小单元。

一个程序至少有一个进程,一个进程至少有一个线程。


### 8、volatile关键字的作用

对于可见性，Java提供了volatile关键字来保证可见性。

当一个共享变量被volatile修饰时，它会保证修改的值会立即被更新到主存，当有其他线程需要读取时，它会去内存中读取新值。

从实践角度而言，volatile的一个重要作用就是和CAS结合，保证了原子性，详细的可以参见java.util.concurrent.atomic包下的类，比如AtomicInteger。


### 9、遇到过元空间溢出吗？

元空间在本地内存上，默认是没有上限的，不加限制出了问题会影响整个服务器的，所以也是比较危险的。-XX:MaxMetaspaceSize 可以指定最大值。

一般使用动态代理的框架会生成很多 Java 类，如果占用空间超出了我们的设定最大值，会发生元空间溢出。


### 10、遇到过堆外内存溢出吗？

**1、** Unsafe 类申请内存、JNI 对内存进行操作、Netty 调用操作系统的 malloc 函数的直接内存，这些内存是不受 JVM 控制的，不加限制的使用，很容易发生溢出。这种情况有个显著特点，dump 的堆文件信息正常甚至很小。

**2、** -XX:MaxDirectMemorySize 可以指定最大直接内存，但限制不住所有堆外内存的使用。


### 11、线程池的执行原理？
### 12、方法区
### 13、什么情况下会发生栈溢出？
### 14、64 位 JVM 中，int 的长度是多数？
### 15、为什么线程通信的方法wait(), notify()和notifyAll()被定义在Object 类里？
### 16、并发队列和并发集合的区别：
### 17、当一个线程进入一个对象的 synchronized 方法 A 之后，其它线程是否可进入此对象的 synchronized 方法 B？
### 18、用Java实现阻塞队列
### 19、创建线程的有哪些方式？
### 20、在 Java 程序中怎么保证多线程的运行安全？
### 21、CMS分为哪几个阶段?
### 22、什么是线程组，为什么在Java中不推荐使用？
### 23、什么是阻塞式方法？
### 24、说说类加载的过程
### 25、Java中notify 和 notifyAll有什么区别？
### 26、并发编程有什么缺点
### 27、说说Java 垃圾回收机制
### 28、JVM 监控与分析工具你用过哪些？介绍一下。
### 29、对象分配内存的方式有哪些？
### 30、什么是线程组，为什么在Java中不推荐使用？
### 31、怎么获取 Java 程序使用的内存？堆使用的百分比？
### 32、并发编程三要素？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)

### 一键直达：[https://www.souyunku.com/?p=67](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)


## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
